<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Rain Sugar BangBang Front-End</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="React.memo() 를 통한 컴포넌트 최적화"/><meta name="keywords" content="react, react-react memo"/><meta http-equiv="subject" content="react"/><meta property="og:title" content="react memo"/><meta property="og:description" content="React.memo() 를 통한 컴포넌트 최적화"/><meta property="og:image" content="../images/REACT.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/6d4b950950709b27.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6d4b950950709b27.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a53d7463cc70d570.js" defer=""></script><script src="/_next/static/chunks/572-f075c46b792eab08.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-a968b2a5bd0cc621.js" defer=""></script><script src="/_next/static/6GS9nwRbhf94SeOmCPczj/_buildManifest.js" defer=""></script><script src="/_next/static/6GS9nwRbhf94SeOmCPczj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="sc-9ea91861-0 iOAgpp"><h1><a href="/">Rain Sugar BangBang</a></h1></header><div class="sc-e2132fdf-0 kyVexk"><section class="sc-e2132fdf-1 HvurB"><aside class="sc-fcf79270-0 kaMvAL"><div class="sc-fcf79270-1 hNxQgV"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="https://avatars.githubusercontent.com/u/85297720?v=4"/><p>Hanbbi</p></div><div class="sc-fcf79270-2 bsikdo"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-e2132fdf-2 iwFTVy"><main class="sc-93b3226-0 gxfIpS"><section class="sc-93b3226-1 gUFnnv"><p>react</p><h1>React.memo() 를 통한 컴포넌트 최적화</h1><span>2023-03-16</span></section><main class="sc-93b3226-2 dhhhyV"><div class="markdown"><blockquote>
<p>유저에게 UI를 빠르게 제공하기 위해서는 컴포넌트의 렌더링을 최소화해 성능을 향상시킬 필요가 있다. 이를 위해 React.memo()에 대한 간단한 사용법을 기록해본다.</p>
</blockquote>
<h1>1. React.memo()</h1>
<p>컴포넌트가 React.memo()로 래핑될 때, React는 컴포넌트를 렌더링하고 결과를 Memoizing한다.</p>
<p>그리고 다음 렌더링이 일어날 때 props가 값다면, React는 Memoizing된 내용을 재사용한다.</p>
<h2>사용법</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#ffc66d">MemoTest</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter" style="color:#a9b7c6">{</span><span class="token parameter"> someProps </span><span class="token parameter" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;Memo test, props 바뀔때만 콘솔 작동&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div style</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token literal-property" style="color:#9876aa">border</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;1px solid black&quot;</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token maybe-class-name">MemoTest</span><span> 컴포넌트</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>props가 바뀔때만 렌더링</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>count와 연동된 props</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>someProps</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#808080">// 다른 컴포넌트에서 불러올 때, 해당 컴포넌트를 import 해주면 된다.</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token maybe-class-name">MemoTestComponent</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">memo</span><span class="token" style="color:#a9b7c6">(</span><span class="token maybe-class-name">MemoTest</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h2>사용 예시</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#ffc66d">TestApp</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> values </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useContextValue</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> update </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useContextUpdate</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span>count</span><span class="token" style="color:#a9b7c6">,</span><span> setCount</span><span class="token" style="color:#a9b7c6">]</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useState</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6897bb">0</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;최상위 컴포넌트 : 렌더링 될때마다 콘솔 작동&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">contextHandler</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    values </span><span class="token" style="color:#a9b7c6">===</span><span> </span><span class="token" style="color:#6a8759">&quot;someData&quot;</span><span> </span><span class="token" style="color:#a9b7c6">?</span><span> </span><span class="token" style="color:#ffc66d">update</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;dataSome&quot;</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#ffc66d">update</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;someData&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div style</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token literal-property" style="color:#9876aa">border</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;1px solid black&quot;</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token maybe-class-name">NormalComponent</span><span> </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token maybe-class-name">MemoTestComponent</span><span> someProps</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span>count</span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button
</span><span>        onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>          </span><span class="token" style="color:#ffc66d">setCount</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">pre</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> pre </span><span class="token" style="color:#a9b7c6">+</span><span> </span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">+</span><span>count버튼
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button
</span><span>        onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>          </span><span class="token" style="color:#ffc66d">setCount</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">pre</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> pre </span><span class="token" style="color:#a9b7c6">-</span><span> </span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">-</span><span>count버튼
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>context value</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>value </span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>values</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span>contextHandler</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>context 변경 버튼</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FVQkSV%2Fbtr37vCBXzm%2FVXiqfYdD4H2FTcw3tGVFzk%2Fimg.png" alt="image"/></p>
<p>위 이미지는 TestApp 코드의 초기 화면이다.</p>
<p>모든 컴포넌트가 첫 렌더링을 거쳐 각각 콘솔을 찍어내고 있다.</p>
<h3>TestApp의 count state는 MemoTest 컴포넌트에 props로 전달해주고 있기 때문에 React.memo()의 효과는 사용되지 않고, 일반 컴포넌트와 마찬가지로 TestApp count state가 변경될 때마다 렌더링되는 것을 볼 수 있다.</h3>
<p><img src="https://blog.kakaocdn.net/dn/Hl6oT/btr4gSJ05tT/kipvw3VkehYfnxf2Pbq780/img.gif" alt="image"/></p>
<h3>하지만 contextAPI처럼 MemoTest의 props와 연관되지 않은 다른 방식을 통해 통해 리렌더링을 발생시키는 경우라면, memoTest 컴포넌트의 props가 변경되지 않기 때문에 MemoTest는 렌더링을 발생시키지 않는다.</h3>
<p><img src="https://blog.kakaocdn.net/dn/cmaheq/btr36GRW8J1/uhzNP5d6ymqDxVDGFK4Ay1/img.gif" alt="image"/></p>
<blockquote>
<p>contextAPI의 기본 사용법 : <a href="https://lee-yo-han.github.io/react/react-context-api">https://lee-yo-han.github.io/react/react-context-api</a></p>
</blockquote>
<hr/>
<h2>1-1 - props 동등 비교 커스터마이징</h2>
<p>React.memo()는 props 혹은 props의 객체를 비교할 때 얕은 비교를 하기 때문에, 비교 방식을 수정하고 싶다면 React.memo() 두 번째 매개변수로 비교함수를 만들어 수동으로 연산 후 넘겨주면 된다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#ffc66d">MemoTest</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter" style="color:#a9b7c6">{</span><span class="token parameter"> someProps </span><span class="token parameter" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;Memo test, props 바뀔때만 콘솔 작동&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div style</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token literal-property" style="color:#9876aa">border</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;1px solid black&quot;</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token maybe-class-name">MemoTest</span><span> 컴포넌트</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>props가 바뀔때만 렌더링</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>count와 연동된 props</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>someProps</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">propsAreEqual</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">prev</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> next</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    prev</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">someProps</span><span> </span><span class="token" style="color:#a9b7c6">===</span><span> next</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">someProps</span><span>
</span><span>    </span><span class="token" style="color:#808080">// 다른 props들이 있는 경우 &amp;&amp;을 통해 연산 추가</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token maybe-class-name">MemoTestComponent</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">memo</span><span class="token" style="color:#a9b7c6">(</span><span class="token maybe-class-name">MemoTest</span><span class="token" style="color:#a9b7c6">,</span><span> propsAreEqual</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h1>2. React.memo()는 언제 사용해야 하는가?</h1>
<h3>- 함수형 컴포넌트가 같은 props로 자주 렌더링 될거라 예상될 경우</h3>
<p>props가 변경되지 않는 경우에도 상위 컴포넌트의 지속적인 렌더링에 의해 하위 컴포넌트의 불필요한 렌더링이 예상되는 경우라면 React.memo()를 통해 오직 props의 변화에만 반응시켜주는 것이 효율적이다.</p>
<h3>- 무겁고 비용이 큰 연산이 있는 경우</h3>
<p>한 번 렌더링 될 때 큰 연산이 발생한다고 했을때 불필요한 렌더링이 일어난 경우 연산에 사용되는 비용이 낭비될 수 있기 때문에 이러한 경우 또한 React.memo()를 통한 memoization이 적절하다고 볼 수 있다.</p>
<h1>3. React.memo()를 언제 사용하지 말아야 하는가?</h1>
<h3>- 위에 언급한 상황과 맞지 않는 경우 React.memo()를 사용할 필요가 없을 가능성이 높다.</h3>
<p>경험적으로 ㅅ어능적인 이점을 얻지 못한다면 memoization을 사용하지 않는 것이 좋다. 성능 관련 변경이 잘못 적용된다면 성능이 오히려 악화될 수 있다.</p>
<h3>- 기술적으로는 가능하지만 클래스 기반의 컴포넌트를 React.memo()로 래핑하는 것은 적절하지 않다.</h3>
<p>클래스 기반의 컴포넌트에서 memoization이 필요하다면, pureComponent를 확장하여 사용하거나, shouldComponentUpdate() 메서드를 구현하는 것이 적절하다.</p>
<h3>- props가 자주 바뀌는 경우</h3>
<p>props가 자주 바뀌는 경우도 React.memo()로 래핑하더라도 이전 props와 다음 props를 비교 함수를 통해 비교할때 거의 false를 반환할 것이기 때문에 props가 자주 바뀌는 경우도 React.memo()의 사용이 적절하지 않다.</p>
<h2>결론</h2>
<blockquote>
<p>React.memo는 memoization의 장점을 얻게 해주는 좋은 도구이지만, 렌더링 방지를 위해 memoization에만 의존하면 안된다.</p>
</blockquote>
<hr/>
<h2>참조</h2>
<p><a href="https://dmitripavlutin.com/use-react-memo-wisely/">https://dmitripavlutin.com/use-react-memo-wisely/</a></p>
<p><a href="https://ui.toast.com/weekly-pick/ko_20190731">https://ui.toast.com/weekly-pick/ko_20190731</a></p></div></main><div class="sc-e20ce73f-0 cWOnTs"><p><strong>&quot;react&quot;</strong> <!-- -->카테고리의 다른 글</p><ul class="sc-e20ce73f-1 gWFpFl"></ul></div><div class="sc-93b3226-3 fVPtBa"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-25c0fcf1-0 jkQdHF"><nav class="sc-cd9d196f-0 eIKFyK"><ul class="sc-cd9d196f-1 ljGEKP"><li>Category</li><li class="sc-cd9d196f-2 QBjCd"><a href="/github">Simple Memo</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/html">HTML</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/css">CSS</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/javascript">JavaScript</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/typescript">TypeScript</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/redux">Redux</a></li><li class="sc-cd9d196f-2 QBjCd"><a style="color:white;font-weight:bold" href="/react">React</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/nextjs">Nextjs</a></li><li class="sc-cd9d196f-2 QBjCd"><a href="/nestjs">Nestjs</a></li></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"react memo","description":"React.memo() 를 통한 컴포넌트 최적화","category":"react","date":"2023-03-16","content":"\r\n\u003e 유저에게 UI를 빠르게 제공하기 위해서는 컴포넌트의 렌더링을 최소화해 성능을 향상시킬 필요가 있다. 이를 위해 React.memo()에 대한 간단한 사용법을 기록해본다.\r\n\r\n# 1. React.memo()\r\n\r\n컴포넌트가 React.memo()로 래핑될 때, React는 컴포넌트를 렌더링하고 결과를 Memoizing한다.\r\n\r\n그리고 다음 렌더링이 일어날 때 props가 값다면, React는 Memoizing된 내용을 재사용한다.\r\n\r\n## 사용법\r\n\r\n```javascript\r\nimport React from \"react\";\r\n\r\nexport const MemoTest = ({ someProps }) =\u003e {\r\n  console.log(\"Memo test, props 바뀔때만 콘솔 작동\");\r\n  return (\r\n    \u003cdiv style={{ border: \"1px solid black\" }}\u003e\r\n      \u003cp\u003eMemoTest 컴포넌트\u003c/p\u003e\r\n      \u003cp\u003eprops가 바뀔때만 렌더링\u003c/p\u003e\r\n      \u003cspan\u003ecount와 연동된 props: {someProps}\u003c/span\u003e\r\n    \u003c/div\u003e\r\n  );\r\n};\r\n\r\n// 다른 컴포넌트에서 불러올 때, 해당 컴포넌트를 import 해주면 된다.\r\nexport const MemoTestComponent = React.memo(MemoTest);\r\n```\r\n\r\n## 사용 예시\r\n\r\n```javascript\r\nexport const TestApp = () =\u003e {\r\n  const values = useContextValue();\r\n  const update = useContextUpdate();\r\n  const [count, setCount] = useState(0);\r\n  console.log(\"최상위 컴포넌트 : 렌더링 될때마다 콘솔 작동\");\r\n\r\n  const contextHandler = () =\u003e {\r\n    values === \"someData\" ? update(\"dataSome\") : update(\"someData\");\r\n  };\r\n\r\n  return (\r\n    \u003cdiv style={{ border: \"1px solid black\" }}\u003e\r\n      \u003cNormalComponent /\u003e\r\n      \u003cMemoTestComponent someProps={count} /\u003e\r\n      \u003cbutton\r\n        onClick={() =\u003e {\r\n          setCount(pre =\u003e pre + 1);\r\n        }}\r\n      \u003e\r\n        +count버튼\r\n      \u003c/button\u003e\r\n      \u003cbutton\r\n        onClick={() =\u003e {\r\n          setCount(pre =\u003e pre - 1);\r\n        }}\r\n      \u003e\r\n        -count버튼\r\n      \u003c/button\u003e\r\n      \u003cdiv\u003e\r\n        \u003cp\u003econtext value\u003c/p\u003e\r\n        \u003cspan\u003evalue : {values}\u003c/span\u003e\r\n        \u003cbutton onClick={contextHandler}\u003econtext 변경 버튼\u003c/button\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  );\r\n};\r\n```\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FVQkSV%2Fbtr37vCBXzm%2FVXiqfYdD4H2FTcw3tGVFzk%2Fimg.png)\r\n\r\n위 이미지는 TestApp 코드의 초기 화면이다.\r\n\r\n모든 컴포넌트가 첫 렌더링을 거쳐 각각 콘솔을 찍어내고 있다.\r\n\r\n### TestApp의 count state는 MemoTest 컴포넌트에 props로 전달해주고 있기 때문에 React.memo()의 효과는 사용되지 않고, 일반 컴포넌트와 마찬가지로 TestApp count state가 변경될 때마다 렌더링되는 것을 볼 수 있다.\r\n\r\n![image](https://blog.kakaocdn.net/dn/Hl6oT/btr4gSJ05tT/kipvw3VkehYfnxf2Pbq780/img.gif)\r\n\r\n### 하지만 contextAPI처럼 MemoTest의 props와 연관되지 않은 다른 방식을 통해 통해 리렌더링을 발생시키는 경우라면, memoTest 컴포넌트의 props가 변경되지 않기 때문에 MemoTest는 렌더링을 발생시키지 않는다.\r\n\r\n![image](https://blog.kakaocdn.net/dn/cmaheq/btr36GRW8J1/uhzNP5d6ymqDxVDGFK4Ay1/img.gif)\r\n\r\n\u003e contextAPI의 기본 사용법 : https://lee-yo-han.github.io/react/react-context-api\r\n\r\n---\r\n\r\n## 1-1 - props 동등 비교 커스터마이징\r\n\r\nReact.memo()는 props 혹은 props의 객체를 비교할 때 얕은 비교를 하기 때문에, 비교 방식을 수정하고 싶다면 React.memo() 두 번째 매개변수로 비교함수를 만들어 수동으로 연산 후 넘겨주면 된다.\r\n\r\n```javascript\r\nimport React from \"react\";\r\n\r\nexport const MemoTest = ({ someProps }) =\u003e {\r\n  console.log(\"Memo test, props 바뀔때만 콘솔 작동\");\r\n  return (\r\n    \u003cdiv style={{ border: \"1px solid black\" }}\u003e\r\n      \u003cp\u003eMemoTest 컴포넌트\u003c/p\u003e\r\n      \u003cp\u003eprops가 바뀔때만 렌더링\u003c/p\u003e\r\n      \u003cspan\u003ecount와 연동된 props: {someProps}\u003c/span\u003e\r\n    \u003c/div\u003e\r\n  );\r\n};\r\n\r\nconst propsAreEqual = (prev, next) =\u003e {\r\n  return (\r\n    prev.someProps === next.someProps\r\n    // 다른 props들이 있는 경우 \u0026\u0026을 통해 연산 추가\r\n  );\r\n};\r\n\r\nexport const MemoTestComponent = React.memo(MemoTest, propsAreEqual);\r\n```\r\n\r\n# 2. React.memo()는 언제 사용해야 하는가?\r\n\r\n### - 함수형 컴포넌트가 같은 props로 자주 렌더링 될거라 예상될 경우\r\n\r\nprops가 변경되지 않는 경우에도 상위 컴포넌트의 지속적인 렌더링에 의해 하위 컴포넌트의 불필요한 렌더링이 예상되는 경우라면 React.memo()를 통해 오직 props의 변화에만 반응시켜주는 것이 효율적이다.\r\n\r\n### - 무겁고 비용이 큰 연산이 있는 경우\r\n\r\n한 번 렌더링 될 때 큰 연산이 발생한다고 했을때 불필요한 렌더링이 일어난 경우 연산에 사용되는 비용이 낭비될 수 있기 때문에 이러한 경우 또한 React.memo()를 통한 memoization이 적절하다고 볼 수 있다.\r\n\r\n# 3. React.memo()를 언제 사용하지 말아야 하는가?\r\n\r\n### - 위에 언급한 상황과 맞지 않는 경우 React.memo()를 사용할 필요가 없을 가능성이 높다.\r\n\r\n경험적으로 ㅅ어능적인 이점을 얻지 못한다면 memoization을 사용하지 않는 것이 좋다. 성능 관련 변경이 잘못 적용된다면 성능이 오히려 악화될 수 있다.\r\n\r\n### - 기술적으로는 가능하지만 클래스 기반의 컴포넌트를 React.memo()로 래핑하는 것은 적절하지 않다.\r\n\r\n클래스 기반의 컴포넌트에서 memoization이 필요하다면, pureComponent를 확장하여 사용하거나, shouldComponentUpdate() 메서드를 구현하는 것이 적절하다.\r\n\r\n### - props가 자주 바뀌는 경우\r\n\r\nprops가 자주 바뀌는 경우도 React.memo()로 래핑하더라도 이전 props와 다음 props를 비교 함수를 통해 비교할때 거의 false를 반환할 것이기 때문에 props가 자주 바뀌는 경우도 React.memo()의 사용이 적절하지 않다.\r\n\r\n## 결론\r\n\r\n\u003e React.memo는 memoization의 장점을 얻게 해주는 좋은 도구이지만, 렌더링 방지를 위해 memoization에만 의존하면 안된다.\r\n\r\n---\r\n\r\n## 참조\r\n\r\nhttps://dmitripavlutin.com/use-react-memo-wisely/\r\n\r\nhttps://ui.toast.com/weekly-pick/ko_20190731\r\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"react-memo"},"buildId":"6GS9nwRbhf94SeOmCPczj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>