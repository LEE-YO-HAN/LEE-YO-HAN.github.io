<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Hanbbi<!-- -->&#x27;<!-- -->s DevLog</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="jest를 통한 테스트코드 사용"/><meta name="keywords" content="javascript, javascript jest test code, javascript, 테스트코드"/><meta http-equiv="title" content="jest를 통한 테스트코드 사용"/><meta http-equiv="subject" content="javascript"/><meta property="og:title" content="javascript jest test code"/><meta property="og:description" content="jest를 통한 테스트코드 사용"/><meta property="og:image" content="/images/cards/JAVASCRIPT.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="14"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f9bc783e634631d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f9bc783e634631d2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7d0bddee48749f95.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-838d6642f093d3b7.js" defer=""></script><script src="/_next/static/chunks/0-225a49c07b374aea.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-ba825353dc99d752.js" defer=""></script><script src="/_next/static/5uJ5pc-9PQpqH_kAx0K76/_buildManifest.js" defer=""></script><script src="/_next/static/5uJ5pc-9PQpqH_kAx0K76/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-c845a976-0 icUnkm"><header class="sc-706d7e74-0 fRVbaU"><span style="display:none" class="sc-706d7e74-1 txrCx"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 17 17" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g></g><path d="M16 3v2h-15v-2h15zM1 10h15v-2h-15v2zM1 15h15v-2h-15v2z"></path></svg></span><h1><a href="/">Hanbbi<!-- -->&#x27;<!-- -->s DevLog</a></h1><nav style="transform:translateX(-100%)" class="sc-e9bb2eba-0 extUal"><div class="sc-e9bb2eba-1 eDAIOV"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg></div><ul class="sc-e9bb2eba-2 kjvNul"><div><p class="sc-e9bb2eba-3 bvmfTl">FE</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/html">HTML</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/css">CSS</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a style="color:white;font-weight:bold" href="/javascript">JavaScript</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/typescript">TypeScript</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/redux">Redux</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/react">React</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">BE</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/nestjs">Nestjs</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">CS</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">ETC</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/github">Simple Memo</a></li></div></ul></nav></header><section class="sc-c845a976-1 bePtAz"><aside class="sc-226f6af7-0 jzKfYm"><div class="sc-226f6af7-1 eudLNA"><a target="_blank" href="https://portfolio-sigma-wheat-63.vercel.app/"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="/images/profileImage/cat.png"/><span>Go Profile!</span></a><p>Hanbbi</p></div><div class="sc-226f6af7-2 fEJwOM"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-c845a976-2 jRRSKe"><main class="sc-39211eb-0 hLWqGG"><section class="sc-39211eb-1 cLKxEH"><p>javascript</p><h1>jest를 통한 테스트코드 사용</h1><span>2023-03-18</span></section><main class="sc-39211eb-2 kPnWiO"><div class="markdown"><h1>jest란?</h1>
<blockquote>
<p>단순성에 중점을 둔 javascript 테스트 프레임워크로, babel, Typescript, node, React, Angular, Vue 등을 사용하는 프로젝트에서 작동한다.</p>
</blockquote>
<p>본 포스팅은 React 환경을 기준으로 작성되었다.</p>
<h2>1. jest 설치</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-bash" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#ffc66d">npm</span><span> </span><span class="token" style="color:#ffc66d">install</span><span> --save-dev jest @babel/preset-env
</span><span></span><span class="token" style="color:#808080"># or</span><span>
</span><span></span><span class="token" style="color:#ffc66d">yarn</span><span> </span><span class="token" style="color:#ffc66d">add</span><span> --dev jest @babel/preset-env</span></code></pre></pre>
<p>node.js 환경에서 import 등의 ES6 문법을 사용하기 위해 @babel/preset-env도 함께 설치해준다.</p>
<h2>2. 루트 경로에 babel.config.js 파일 생성</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>module</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">exports</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">presets</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span>
</span><span>    </span><span class="token" style="color:#6a8759">&quot;@babel/preset-env&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">// typescript를 사용하는 경우 yarn add --dev @babel/preset-typescript 설치 후</span><span>
</span><span>    </span><span class="token" style="color:#808080">// 아래와 같이 preset을 추가해준다.</span><span>
</span><span>    </span><span class="token" style="color:#808080">// &quot;@babel/preset-typescript&quot;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>babel config 파일까지 생성이 완료됐다면 test 파일을 사용할 준비가 다 된 것이다.</p>
<h2>3. jest가 인식하는 test file 이름</h2>
<ul>
<li>{filename}.test.js</li>
<li>{filename}.spec.js</li>
</ul>
<h2>4. 테스트 실행</h2>
<p>jest 커맨드만으로도 테스트 코드를 진행할 수 있지만, 다른 플래그와 함께 사용할 수 있다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-bash" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>--coverage </span><span class="token" style="color:#808080"># 프로젝트의 테스트 커버리지를 함께 나타내준다.</span><span>
</span><span>--watch </span><span class="token" style="color:#808080"># 대상 코드나 테스트 코드에 변경이 생기면 테스트를 다시 실행한다.</span><span>
</span>
<span></span><span class="token" style="color:#808080"># ex) yarn jest --watch --coverage</span></code></pre></pre>
<p>jest만 실행한 터미널</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbmEHBz%2Fbtr4t9fB6IJ%2Fl1JqzgbkjoBxDREUdoSgzK%2Fimg.png" alt="image"/></p>
<p>--coverage와 함께 실행한 터미널</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FPTj6f%2Fbtr4vjvmeEt%2Ft5NIYNk6kzRJ4PQ1IQA48k%2Fimg.png" alt="image"/></p>
<blockquote>
<p>참고 : jest는 테스트 코드 내에서 오류가 발생할 때만 테스트를 fail시키기 때문에 test(&quot;&quot;,()=&gt;{})와 같이 테스트 코드가 비어있더라도 테스트를 통과할 수 있다.</p>
</blockquote>
<h2>5. 테스트 코드 패턴</h2>
<h3>AAA 패턴 (Arrange - Act - Assert)</h3>
<ul>
<li>A 조건에서 B를 실행했을때 예상한 결과가 C가 나오는가? 라는 흐름의 패턴이다.</li>
</ul>
<p>예제</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// 기존 함수</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">add</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">a</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> b</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> a </span><span class="token" style="color:#a9b7c6">+</span><span> b</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#808080">// somefn.spec.js - 테스트코드 함수</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> add </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;./someFn&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#ffc66d">test</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;add 함수 테스트: result = a+b&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#808080">// 조건</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> a </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#6897bb">2</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> b </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#6897bb">3</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> result </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#6897bb">5</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#808080">// 실행</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> actResult </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">add</span><span class="token" style="color:#a9b7c6">(</span><span>a</span><span class="token" style="color:#a9b7c6">,</span><span> b</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#808080">// 평가</span><span>
</span><span>  </span><span class="token" style="color:#ffc66d">expect</span><span class="token" style="color:#a9b7c6">(</span><span>actResult</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">toBe</span><span class="token" style="color:#a9b7c6">(</span><span>result</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>평가 부분의 코드는 .toBe()라는 matcher 함수를 통해 actResult를 실행했을 때 result가 나올 것이라는 기대를 갖고 코드를 평가하게 된다.</p>
<p>아래와 같이 여러 함수를 한 테스트 코드 안에 넣을 수도 있지만, 리팩토링 시 불편한 경험을 할 수 있기 때문에 상황에 맞게 사용해주는 것이 좋을 것 같다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FckHjWD%2Fbtr4t5Eptqn%2FccX4fWxWW6GZ9edDMtjdAK%2Fimg.png" alt="image"/></p>
<p>주요 matcher 함수</p>
<ul>
<li>toBe() : 원시형 데이터 비교</li>
<li>toEqual() : 참조형 데이터를 깊은 비교를 통해 비교</li>
<li>toBeTruthy() : 값이 참인지 검사</li>
<li>toContain() : 특정 요소가 배열 안에 존재하는지 검사</li>
<li>not : 다른 matcher 함수 앞에 체이닝해 사용하며, 해당 값의 반대값이 참인지 검사 (not은 함수가 아닌 property)</li>
</ul>
<p>공식 문서에서 더 자세하게 확인해볼 수 있다. (<a href="https://jestjs.io/docs/using-matchers">https://jestjs.io/docs/using-matchers</a>)</p>
<h2>6. 테스트 코드를 통해 할 수 있는 것</h2>
<ul>
<li>내가 작성한 함수들이 내가 원하는대로 작동하는지 확인할 수 있다.</li>
<li>테스트 코드 작성을 통해 TDD 방식의 개발 방법론을 적용할 수 있다.</li>
</ul>
<h2>TDD란?</h2>
<blockquote>
<p>TDD는 테스트 주도 개발(Test Driven Development)을 뜻하며, 테스트 케이스를 우선적으로 설계해 개발을 진행하는 방법론이다.</p>
</blockquote>
<h3>1. 테스트 케이스를 우선적으로 설계하고,</h3>
<h3>2. 함수를 테스트 케이스에 맞춰 제작하며,</h3>
<h3>3. 로직을 개선하며 1~3을 반복한다.</h3>
<p>즉, 실패-성공-리팩토링의 반복으로 볼 수 있다.</p>
<p>TDD의 예시</p>
<p><a href="https://velog.io/@velopert/TDD%EC%9D%98-%EC%86%8C%EA%B0%9C">https://velog.io/@velopert/TDD%EC%9D%98-%EC%86%8C%EA%B0%9C</a></p>
<hr/>
<p>참조 : <a href="https://jestjs.io/">https://jestjs.io/</a></p></div></main><div class="sc-e5001ff0-0 hvYKNx"><p><strong>javascript</strong> 카테고리의 다른 글</p><ul class="sc-e5001ff0-1 fGkysO"></ul></div><div class="sc-39211eb-3 jqcgtI"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-7eadfa91-0 cYGwoY"><nav class="sc-ef3fe011-0 fOQwiv"><ul class="sc-ef3fe011-1 gcpOaT"><p>Category</p><div><p class="sc-ef3fe011-2 jLZscn">FE</p><li class="sc-ef3fe011-3 frUPYo"><a href="/html">HTML</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/css">CSS</a></li><li class="sc-ef3fe011-3 frUPYo"><a style="color:white;font-weight:bold" href="/javascript">JavaScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/typescript">TypeScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/redux">Redux</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/react">React</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">BE</p><li class="sc-ef3fe011-3 frUPYo"><a href="/nestjs">Nestjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">CS</p><li class="sc-ef3fe011-3 frUPYo"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">ETC</p><li class="sc-ef3fe011-3 frUPYo"><a href="/github">Simple Memo</a></li></div></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"javascript jest test code","description":"jest를 통한 테스트코드 사용","category":"javascript","keyword":"javascript, 테스트코드","date":"2023-03-18","content":"\r\n# jest란?\r\n\r\n\u003e 단순성에 중점을 둔 javascript 테스트 프레임워크로, babel, Typescript, node, React, Angular, Vue 등을 사용하는 프로젝트에서 작동한다.\r\n\r\n본 포스팅은 React 환경을 기준으로 작성되었다.\r\n\r\n## 1. jest 설치\r\n\r\n```bash\r\nnpm install --save-dev jest @babel/preset-env\r\n# or\r\nyarn add --dev jest @babel/preset-env\r\n```\r\n\r\nnode.js 환경에서 import 등의 ES6 문법을 사용하기 위해 @babel/preset-env도 함께 설치해준다.\r\n\r\n## 2. 루트 경로에 babel.config.js 파일 생성\r\n\r\n```javascript\r\nmodule.exports = {\r\n  presets: [\r\n    \"@babel/preset-env\",\r\n    // typescript를 사용하는 경우 yarn add --dev @babel/preset-typescript 설치 후\r\n    // 아래와 같이 preset을 추가해준다.\r\n    // \"@babel/preset-typescript\"\r\n  ],\r\n};\r\n```\r\n\r\nbabel config 파일까지 생성이 완료됐다면 test 파일을 사용할 준비가 다 된 것이다.\r\n\r\n## 3. jest가 인식하는 test file 이름\r\n\r\n- {filename}.test.js\r\n- {filename}.spec.js\r\n\r\n## 4. 테스트 실행\r\n\r\njest 커맨드만으로도 테스트 코드를 진행할 수 있지만, 다른 플래그와 함께 사용할 수 있다.\r\n\r\n```bash\r\n--coverage # 프로젝트의 테스트 커버리지를 함께 나타내준다.\r\n--watch # 대상 코드나 테스트 코드에 변경이 생기면 테스트를 다시 실행한다.\r\n\r\n# ex) yarn jest --watch --coverage\r\n```\r\n\r\njest만 실행한 터미널\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbmEHBz%2Fbtr4t9fB6IJ%2Fl1JqzgbkjoBxDREUdoSgzK%2Fimg.png)\r\n\r\n--coverage와 함께 실행한 터미널\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FPTj6f%2Fbtr4vjvmeEt%2Ft5NIYNk6kzRJ4PQ1IQA48k%2Fimg.png)\r\n\r\n\u003e 참고 : jest는 테스트 코드 내에서 오류가 발생할 때만 테스트를 fail시키기 때문에 test(\"\",()=\u003e{})와 같이 테스트 코드가 비어있더라도 테스트를 통과할 수 있다.\r\n\r\n## 5. 테스트 코드 패턴\r\n\r\n### AAA 패턴 (Arrange - Act - Assert)\r\n\r\n- A 조건에서 B를 실행했을때 예상한 결과가 C가 나오는가? 라는 흐름의 패턴이다.\r\n\r\n예제\r\n\r\n```javascript\r\n// 기존 함수\r\nexport const add = (a, b) =\u003e {\r\n  return a + b;\r\n};\r\n\r\n// somefn.spec.js - 테스트코드 함수\r\n\r\nimport { add } from \"./someFn\";\r\n\r\ntest(\"add 함수 테스트: result = a+b\", () =\u003e {\r\n  // 조건\r\n  const a = 2;\r\n  const b = 3;\r\n  const result = 5;\r\n\r\n  // 실행\r\n  const actResult = add(a, b);\r\n\r\n  // 평가\r\n  expect(actResult).toBe(result);\r\n});\r\n```\r\n\r\n평가 부분의 코드는 .toBe()라는 matcher 함수를 통해 actResult를 실행했을 때 result가 나올 것이라는 기대를 갖고 코드를 평가하게 된다.\r\n\r\n아래와 같이 여러 함수를 한 테스트 코드 안에 넣을 수도 있지만, 리팩토링 시 불편한 경험을 할 수 있기 때문에 상황에 맞게 사용해주는 것이 좋을 것 같다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FckHjWD%2Fbtr4t5Eptqn%2FccX4fWxWW6GZ9edDMtjdAK%2Fimg.png)\r\n\r\n주요 matcher 함수\r\n\r\n- toBe() : 원시형 데이터 비교\r\n- toEqual() : 참조형 데이터를 깊은 비교를 통해 비교\r\n- toBeTruthy() : 값이 참인지 검사\r\n- toContain() : 특정 요소가 배열 안에 존재하는지 검사\r\n- not : 다른 matcher 함수 앞에 체이닝해 사용하며, 해당 값의 반대값이 참인지 검사 (not은 함수가 아닌 property)\r\n\r\n공식 문서에서 더 자세하게 확인해볼 수 있다. (https://jestjs.io/docs/using-matchers)\r\n\r\n## 6. 테스트 코드를 통해 할 수 있는 것\r\n\r\n- 내가 작성한 함수들이 내가 원하는대로 작동하는지 확인할 수 있다.\r\n- 테스트 코드 작성을 통해 TDD 방식의 개발 방법론을 적용할 수 있다.\r\n\r\n## TDD란?\r\n\r\n\u003e TDD는 테스트 주도 개발(Test Driven Development)을 뜻하며, 테스트 케이스를 우선적으로 설계해 개발을 진행하는 방법론이다.\r\n\r\n### 1. 테스트 케이스를 우선적으로 설계하고,\r\n\r\n### 2. 함수를 테스트 케이스에 맞춰 제작하며,\r\n\r\n### 3. 로직을 개선하며 1~3을 반복한다.\r\n\r\n즉, 실패-성공-리팩토링의 반복으로 볼 수 있다.\r\n\r\nTDD의 예시\r\n\r\nhttps://velog.io/@velopert/TDD%EC%9D%98-%EC%86%8C%EA%B0%9C\r\n\r\n---\r\n\r\n참조 : https://jestjs.io/\r\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"javascript-jest-test-code"},"buildId":"5uJ5pc-9PQpqH_kAx0K76","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>