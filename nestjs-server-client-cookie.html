<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Hanbbi<!-- -->&#x27;<!-- -->s DevLog</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="NestJS에서 클라이언트로 쿠키 보내기 (왜 내 쿠키는 안받아줘요?)"/><meta name="keywords" content="nestjs, nestjs server client cookie, nestjs, 쿠키"/><meta http-equiv="title" content="NestJS에서 클라이언트로 쿠키 보내기 (왜 내 쿠키는 안받아줘요?)"/><meta http-equiv="subject" content="nestjs"/><meta property="og:title" content="nestjs server client cookie"/><meta property="og:description" content="NestJS에서 클라이언트로 쿠키 보내기 (왜 내 쿠키는 안받아줘요?)"/><meta property="og:image" content="/images/cards/NESTJS.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="14"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f9bc783e634631d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f9bc783e634631d2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7d0bddee48749f95.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2feefd3e30fe8ff2.js" defer=""></script><script src="/_next/static/chunks/0-225a49c07b374aea.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-ba825353dc99d752.js" defer=""></script><script src="/_next/static/WNf6OoAzCHgUe45QKfkb1/_buildManifest.js" defer=""></script><script src="/_next/static/WNf6OoAzCHgUe45QKfkb1/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-c845a976-0 icUnkm"><header class="sc-706d7e74-0 fRVbaU"><span style="display:none" class="sc-706d7e74-1 txrCx"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 17 17" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g></g><path d="M16 3v2h-15v-2h15zM1 10h15v-2h-15v2zM1 15h15v-2h-15v2z"></path></svg></span><h1><a href="/">Hanbbi<!-- -->&#x27;<!-- -->s DevLog</a></h1><nav style="transform:translateX(-100%)" class="sc-72c91137-0 dFBztS"><div class="sc-72c91137-1 cNkluC"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg></div><ul class="sc-72c91137-2 bWycuO"><div><p class="sc-72c91137-3 fTSpoK">FE</p><li class="sc-72c91137-4 loqXnL"><a href="/html">HTML</a></li><li class="sc-72c91137-4 loqXnL"><a href="/css">CSS</a></li><li class="sc-72c91137-4 loqXnL"><a href="/javascript">JavaScript</a></li><li class="sc-72c91137-4 loqXnL"><a href="/typescript">TypeScript</a></li><li class="sc-72c91137-4 loqXnL"><a href="/redux">Redux</a></li><li class="sc-72c91137-4 loqXnL"><a href="/react">React</a></li><li class="sc-72c91137-4 loqXnL"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-72c91137-3 fTSpoK">BE</p><li class="sc-72c91137-4 loqXnL"><a style="color:white;font-weight:bold" href="/nestjs">Nestjs</a></li></div><div><p class="sc-72c91137-3 fTSpoK">CS</p><li class="sc-72c91137-4 loqXnL"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-72c91137-3 fTSpoK">ETC</p><li class="sc-72c91137-4 loqXnL"><a href="/github">Simple Memo</a></li></div></ul></nav></header><section class="sc-c845a976-1 bePtAz"><aside class="sc-226f6af7-0 jzKfYm"><div class="sc-226f6af7-1 eudLNA"><a target="_blank" href="https://portfolio-sigma-wheat-63.vercel.app/"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="/images/profileImage/cat.png"/><span>Go Profile!</span></a><p>Hanbbi</p></div><div class="sc-226f6af7-2 fEJwOM"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-c845a976-2 jRRSKe"><main class="sc-39211eb-0 hLWqGG"><section class="sc-39211eb-1 cLKxEH"><p>NestJS</p><h1>NestJS에서 클라이언트로 쿠키 보내기 (왜 내 쿠키는 안받아줘요?)</h1><span>2023-04-13</span></section><main class="sc-39211eb-2 kPnWiO"><div class="markdown"><p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FpD9qr%2Fbtr9Oa0APIT%2FFuzZyjjney7aKkIXy6BAfK%2Fimg.png" alt="image"/></p>
<h2>쿠키(Cookie)란?</h2>
<p>쿠키는 서버에서 클라이언트에게 보내는 작은 데이터 조각이다. 일반적으로 브라우저에서 웹 사이트를 방문할 때 쿠키를 사용하여 사용자의 활동을 기록하고, 이후에 그 사용자가 같은 웹 사이트를 방문할 때 이 정보를 사용해 그에 맞게 동작하게 해준다. 하지만 쿠키는 당사자뿐만 아닌 제 3자가 조회하는 것도 가능하기 때문에 개인 정보를 담는 등 보안상 민감한 정보를 저장하는 데에는 적합하지 않기 때문에 탈취되거나 사용자에 의해 조작되어도 크게 문제 되지 않을 정보를 주로 저장한다. (ex. 다크 모드, 장바구니 목록 등)</p>
<h2>서버에서 클라이언트로 Cookie 전송 예제</h2>
<h3>모듈 설치</h3>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-bash" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#ffc66d">yarn</span><span> </span><span class="token" style="color:#ffc66d">add</span><span> cookie-parser @types/cookie-parser </span><span class="token" style="color:#808080"># 쿠키 관리 모듈</span></code></pre></pre>
<h3>모듈 적용</h3>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// main.ts</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">NestFactory</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@nestjs/core&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">AppModule</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;./app.module&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">*</span><span class="token imports"> </span><span class="token imports module" style="color:#cc7832">as</span><span class="token imports"> cookieParser</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;cookie-parser&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#cc7832">function</span><span> </span><span class="token" style="color:#ffc66d">bootstrap</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> app </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token maybe-class-name">NestFactory</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">create</span><span class="token" style="color:#a9b7c6">(</span><span class="token maybe-class-name">AppModule</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  app</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">enableCors</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">// cors 설정</span><span>
</span><span>    origin</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;http://localhost:3000&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    credentials</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#808080">// 쿠키를 사용할 수 있게 해당 값을 true로 설정</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  app</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">use</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">cookieParser</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// 쿠키의 편리한 이용을 위해 cookieParser 적용</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">await</span><span> app</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">listen</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6897bb">3001</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#ffc66d">bootstrap</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h3>쿠키 사용 로직</h3>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// controller.ts</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Response</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;express&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Controller</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Get</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Res</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@nestjs/common&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Controller</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;myController&quot;</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">class</span><span> </span><span class="token class-name maybe-class-name">MyController</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Get</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>  </span><span class="token" style="color:#ffc66d">getCookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Res</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> res</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token maybe-class-name">Response</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">// express의 Response 객체를 불러와 사용해준다.</span><span>
</span><span>    </span><span class="token" style="color:#808080">// 쿠키 설정</span><span>
</span><span>    res</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">cookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;cookieName&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;cookieValue&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> maxAge</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6897bb">900000</span><span class="token" style="color:#a9b7c6">,</span><span> httpOnly</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#808080">// maxAge : 유효기간을 밀리초 단위로 설정</span><span>
</span><span>    </span><span class="token" style="color:#808080">// httpOnly : 클라이언트에서 쿠키에 접근할 수 없도록 설정</span><span>
</span>
<span>    </span><span class="token" style="color:#808080">// HTTP 응답 반환</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">return</span><span> res</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">send</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;쿠키가 설정되었습니다.&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></pre></pre>
<p>쿠키를 요청하는 클라이언트에서도 withCredentials 값을 true로 설정해준다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#9876aa">BASE_URL</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  withCredentials</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  headers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token string-property" style="color:#9876aa">&quot;Content-Type&quot;</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;application/json&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h2>문제상황</h2>
<p>보통 예제는 위와 같지만 나는 쿠키가 브라우저에 저장되지 않았다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fd0P7QS%2Fbtr9SjoI9ke%2FIW9CJf8K5mS7kDuau67KDK%2Fimg.png" alt="image"/></p>
<p>로직이 잘못된 것처럼 보이지도 않았고 별도의 에러 메시지도 없어서 문제 파악이 어려웠다.</p>
<p>네트워크 탭을 통해 확인해 보니 response 헤더에 쿠키도 정상적으로 들어가 있었다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FDRJgW%2Fbtr9NnsBfTs%2FlGo4A2uw6n2UXPJJQVwbb1%2Fimg.png" alt="image"/></p>
<p>그런데 노란 경고판이 눈에 띄었다.</p>
<p>경고 문구는 다음과 같다.</p>
<blockquote>
<p><strong>this set-cookie header didn&#x27;t specify a samesite attribute, was defaulted to sameSite=Lax, and was blocked because it came from a cross-site reponse which was not the response to a top-level navigation. this response is considered cross-site because the URL has a different scheme than the current site</strong></p>
</blockquote>
<p>요청 URL과 서버 URL의 체계가 달라서 차단됐다고 한다. 내 클라이언트는 <a href="http://localhost%EC%9D%B8%EB%8D%B0">http://localhost인데</a> 서버가 <a href="https://localhost%EB%9D%BC%EC%84%9C">https://localhost라서</a> 그런 것 같았다.</p>
<p>sameSite를 none으로 설정해주고 난 후에는 다음과 같은 경고 문구가 생겼다.</p>
<blockquote>
<p><strong>this attempt to set a cookie via a set-cookie header was blocked because it had the &quot;SameSite=None&quot; attribute but did not have the &quot;Secure&quot; attibute, which is required in order to user &quot;sameSite=None&quot;</strong></p>
</blockquote>
<p>sameSite=none을 적용하기 위해 필요한 Secure 속성이 없기 때문에 쿠키 설정이 차단되었단다.</p>
<p>쿠키 생성 옵션을 마저 추가해 줬다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>res</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">cookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;cookieName&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;cookieValue&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  maxAge</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6897bb">300000</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#808080">// none, lax, strict 중 none은 쿠키가 항상 전송되도록 허용.</span><span>
</span><span>  sameSite</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;none&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#808080">// HTTPS 프로토콜을 사용하고 secure 옵션이 설정된 경우에만 사용 가능</span><span>
</span><span>  secure</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#808080">// 쿠키가 HTTPS 프로토콜을 사용하는 경우에만 전송되도록 제한</span><span>
</span><span>  httpOnly</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#808080">// 쿠키에 접근할 수 있는 영역을 HTTP(S) 프로토콜로 제한하여,</span><span>
</span><span>  </span><span class="token" style="color:#808080">// 브라우저의 자바스크립트 코드로부터 쿠키에 접근할 수 없게 함</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>secure 속성을 사용하기 위한 https 설정은 아래를 참고할 수 있다.</p>
<h3><a href="https://lee-yo-han.github.io/nestjs-localhost-https">Localhost 환경에서 https 적용하기</a></h3>
<p>그 결과 쿠키를 브라우저에서 잘 받는 것을 볼 수 있었다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FJwJs6%2Fbtr9SkupB08%2FbXf0Hf9swCaY3uL8cxMh7K%2Fimg.png" alt="image"/></p>
<p>마지막으로 서버에서 쿠키를 받아 사용하는 방법이다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Response</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Request</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;express&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Controller</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Get</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Post</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Res</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Req</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@nestjs/common&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Controller</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;myController&quot;</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">class</span><span> </span><span class="token class-name maybe-class-name">MyController</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Get</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>  </span><span class="token" style="color:#ffc66d">getCookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Res</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> res</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token maybe-class-name">Response</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">// express의 Response 객체를 불러와 사용해준다.</span><span>
</span><span>    </span><span class="token" style="color:#808080">// 쿠키 설정</span><span>
</span><span>    res</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">cookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;cookieName&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;cookieValue&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> maxAge</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6897bb">900000</span><span class="token" style="color:#a9b7c6">,</span><span> httpOnly</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">true</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#808080">// maxAge : 유효기간을 밀리초 단위로 설정</span><span>
</span><span>    </span><span class="token" style="color:#808080">// httpOnly : 클라이언트에서 쿠키에 접근할 수 없도록 설정</span><span>
</span>
<span>    </span><span class="token" style="color:#808080">// HTTP 응답 반환</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">return</span><span> res</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">send</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;쿠키가 설정되었습니다.&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span>
</span>
<span>  </span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Get</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>  </span><span class="token" style="color:#ffc66d">postCookie</span><span class="token" style="color:#a9b7c6">(</span><span class="token decorator at" style="color:#a9b7c6">@</span><span class="token decorator" style="color:#ffc66d">Req</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> req</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token maybe-class-name">Request</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">// express의 Request 객체를 불러와 사용해준다.</span><span>
</span><span>    </span><span class="token" style="color:#808080">// request 객체의 cookies를 통해 생성했던 쿠키의 이름을 통해 값을 가져온다.</span><span>
</span><span>    req</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">cookies</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6a8759">&quot;cookieName&quot;</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></pre></pre>
<p>클라이언트 단에서는 withCredentials:true 옵션 설정 외에는 특별히 해줄 것이 없다.</p>
<hr/>
<p>참조 : <a href="https://docs.nestjs.com/techniques/cookies">https://docs.nestjs.com/techniques/cookies</a></p></div></main><div class="sc-e5001ff0-0 hvYKNx"><p><strong>NestJS</strong> 카테고리의 다른 글</p><ul class="sc-e5001ff0-1 fGkysO"></ul></div><div class="sc-39211eb-3 jqcgtI"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-7eadfa91-0 cYGwoY"><nav class="sc-ef3fe011-0 fOQwiv"><ul class="sc-ef3fe011-1 gcpOaT"><p>Category</p><div><p class="sc-ef3fe011-2 jLZscn">FE</p><li class="sc-ef3fe011-3 frUPYo"><a href="/html">HTML</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/css">CSS</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/javascript">JavaScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/typescript">TypeScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/redux">Redux</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/react">React</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">BE</p><li class="sc-ef3fe011-3 frUPYo"><a style="color:white;font-weight:bold" href="/nestjs">Nestjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">CS</p><li class="sc-ef3fe011-3 frUPYo"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">ETC</p><li class="sc-ef3fe011-3 frUPYo"><a href="/github">Simple Memo</a></li></div></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"nestjs server client cookie","description":"NestJS에서 클라이언트로 쿠키 보내기 (왜 내 쿠키는 안받아줘요?)","category":"nestjs","keyword":"nestjs, 쿠키","date":"2023-04-13","content":"\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FpD9qr%2Fbtr9Oa0APIT%2FFuzZyjjney7aKkIXy6BAfK%2Fimg.png)\r\n\r\n## 쿠키(Cookie)란?\r\n\r\n쿠키는 서버에서 클라이언트에게 보내는 작은 데이터 조각이다. 일반적으로 브라우저에서 웹 사이트를 방문할 때 쿠키를 사용하여 사용자의 활동을 기록하고, 이후에 그 사용자가 같은 웹 사이트를 방문할 때 이 정보를 사용해 그에 맞게 동작하게 해준다. 하지만 쿠키는 당사자뿐만 아닌 제 3자가 조회하는 것도 가능하기 때문에 개인 정보를 담는 등 보안상 민감한 정보를 저장하는 데에는 적합하지 않기 때문에 탈취되거나 사용자에 의해 조작되어도 크게 문제 되지 않을 정보를 주로 저장한다. (ex. 다크 모드, 장바구니 목록 등)\r\n\r\n## 서버에서 클라이언트로 Cookie 전송 예제\r\n\r\n### 모듈 설치\r\n\r\n```bash\r\nyarn add cookie-parser @types/cookie-parser # 쿠키 관리 모듈\r\n```\r\n\r\n### 모듈 적용\r\n\r\n```typescript\r\n// main.ts\r\n\r\nimport { NestFactory } from \"@nestjs/core\";\r\nimport { AppModule } from \"./app.module\";\r\nimport * as cookieParser from \"cookie-parser\";\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create(AppModule);\r\n  app.enableCors({\r\n    // cors 설정\r\n    origin: \"http://localhost:3000\",\r\n    credentials: true, // 쿠키를 사용할 수 있게 해당 값을 true로 설정\r\n  });\r\n  app.use(cookieParser()); // 쿠키의 편리한 이용을 위해 cookieParser 적용\r\n  await app.listen(3001);\r\n}\r\nbootstrap();\r\n```\r\n\r\n### 쿠키 사용 로직\r\n\r\n```typescript\r\n// controller.ts\r\n\r\nimport { Response } from \"express\";\r\nimport { Controller, Get, Res } from \"@nestjs/common\";\r\n\r\n@Controller(\"myController\")\r\nexport class MyController {\r\n  @Get()\r\n  getCookie(@Res() res: Response) {\r\n    // express의 Response 객체를 불러와 사용해준다.\r\n    // 쿠키 설정\r\n    res.cookie(\"cookieName\", \"cookieValue\", { maxAge: 900000, httpOnly: true });\r\n    // maxAge : 유효기간을 밀리초 단위로 설정\r\n    // httpOnly : 클라이언트에서 쿠키에 접근할 수 없도록 설정\r\n\r\n    // HTTP 응답 반환\r\n    return res.send(\"쿠키가 설정되었습니다.\");\r\n  }\r\n}\r\n```\r\n\r\n쿠키를 요청하는 클라이언트에서도 withCredentials 값을 true로 설정해준다.\r\n\r\n```typescript\r\naxios.get(BASE_URL, {\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n```\r\n\r\n## 문제상황\r\n\r\n보통 예제는 위와 같지만 나는 쿠키가 브라우저에 저장되지 않았다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fd0P7QS%2Fbtr9SjoI9ke%2FIW9CJf8K5mS7kDuau67KDK%2Fimg.png)\r\n\r\n로직이 잘못된 것처럼 보이지도 않았고 별도의 에러 메시지도 없어서 문제 파악이 어려웠다.\r\n\r\n네트워크 탭을 통해 확인해 보니 response 헤더에 쿠키도 정상적으로 들어가 있었다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FDRJgW%2Fbtr9NnsBfTs%2FlGo4A2uw6n2UXPJJQVwbb1%2Fimg.png)\r\n\r\n그런데 노란 경고판이 눈에 띄었다.\r\n\r\n경고 문구는 다음과 같다.\r\n\r\n\u003e **this set-cookie header didn't specify a samesite attribute, was defaulted to sameSite=Lax, and was blocked because it came from a cross-site reponse which was not the response to a top-level navigation. this response is considered cross-site because the URL has a different scheme than the current site**\r\n\r\n요청 URL과 서버 URL의 체계가 달라서 차단됐다고 한다. 내 클라이언트는 http://localhost인데 서버가 https://localhost라서 그런 것 같았다.\r\n\r\nsameSite를 none으로 설정해주고 난 후에는 다음과 같은 경고 문구가 생겼다.\r\n\r\n\u003e **this attempt to set a cookie via a set-cookie header was blocked because it had the \"SameSite=None\" attribute but did not have the \"Secure\" attibute, which is required in order to user \"sameSite=None\"**\r\n\r\nsameSite=none을 적용하기 위해 필요한 Secure 속성이 없기 때문에 쿠키 설정이 차단되었단다.\r\n\r\n쿠키 생성 옵션을 마저 추가해 줬다.\r\n\r\n```typescript\r\nres.cookie(\"cookieName\", \"cookieValue\", {\r\n  maxAge: 300000,\r\n  // none, lax, strict 중 none은 쿠키가 항상 전송되도록 허용.\r\n  sameSite: \"none\", // HTTPS 프로토콜을 사용하고 secure 옵션이 설정된 경우에만 사용 가능\r\n  secure: true, // 쿠키가 HTTPS 프로토콜을 사용하는 경우에만 전송되도록 제한\r\n  httpOnly: true, // 쿠키에 접근할 수 있는 영역을 HTTP(S) 프로토콜로 제한하여,\r\n  // 브라우저의 자바스크립트 코드로부터 쿠키에 접근할 수 없게 함\r\n});\r\n```\r\n\r\nsecure 속성을 사용하기 위한 https 설정은 아래를 참고할 수 있다.\r\n\r\n### [Localhost 환경에서 https 적용하기](https://lee-yo-han.github.io/nestjs-localhost-https)\r\n\r\n그 결과 쿠키를 브라우저에서 잘 받는 것을 볼 수 있었다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FJwJs6%2Fbtr9SkupB08%2FbXf0Hf9swCaY3uL8cxMh7K%2Fimg.png)\r\n\r\n마지막으로 서버에서 쿠키를 받아 사용하는 방법이다.\r\n\r\n```typescript\r\nimport { Response, Request } from \"express\";\r\nimport { Controller, Get, Post, Res, Req } from \"@nestjs/common\";\r\n\r\n@Controller(\"myController\")\r\nexport class MyController {\r\n  @Get()\r\n  getCookie(@Res() res: Response) {\r\n    // express의 Response 객체를 불러와 사용해준다.\r\n    // 쿠키 설정\r\n    res.cookie(\"cookieName\", \"cookieValue\", { maxAge: 900000, httpOnly: true });\r\n    // maxAge : 유효기간을 밀리초 단위로 설정\r\n    // httpOnly : 클라이언트에서 쿠키에 접근할 수 없도록 설정\r\n\r\n    // HTTP 응답 반환\r\n    return res.send(\"쿠키가 설정되었습니다.\");\r\n  }\r\n\r\n  @Get()\r\n  postCookie(@Req() req: Request) {\r\n    // express의 Request 객체를 불러와 사용해준다.\r\n    // request 객체의 cookies를 통해 생성했던 쿠키의 이름을 통해 값을 가져온다.\r\n    req.cookies[\"cookieName\"];\r\n  }\r\n}\r\n```\r\n\r\n클라이언트 단에서는 withCredentials:true 옵션 설정 외에는 특별히 해줄 것이 없다.\r\n\r\n---\r\n\r\n참조 : https://docs.nestjs.com/techniques/cookies\r\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"nestjs-server-client-cookie"},"buildId":"WNf6OoAzCHgUe45QKfkb1","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>