<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Rain Sugar BangBang Front-End</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="React reduxToolkit과 미들웨어 AsyncThunk 사용해보기"/><meta name="keywords" content="redux, redux-redux toolkit async thunk"/><meta http-equiv="subject" content="redux"/><meta property="og:title" content="redux toolkit async thunk"/><meta property="og:description" content="React reduxToolkit과 미들웨어 AsyncThunk 사용해보기"/><meta property="og:image" content="../images/REDUX.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/b4f97ab2e5eec96e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b4f97ab2e5eec96e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0613093c3b45bf1f.js" defer=""></script><script src="/_next/static/chunks/572-f075c46b792eab08.js" defer=""></script><script src="/_next/static/chunks/pages/redux/%5Bslug%5D-7470f7a8baafdc3c.js" defer=""></script><script src="/_next/static/_Kz-w44CnRMqZ_Rgxmu4u/_buildManifest.js" defer=""></script><script src="/_next/static/_Kz-w44CnRMqZ_Rgxmu4u/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="sc-fc886cc0-0 bZSIAs"><h1>Rain Sugar BangBang</h1></header><div class="sc-ba37e1ab-0 jsuXVA"><section class="sc-ba37e1ab-1 flRwaC"><aside class="sc-66bc730f-0 khiCBg"><div class="sc-66bc730f-1 IEUha"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="https://avatars.githubusercontent.com/u/85297720?v=4"/><p>Hanbbi</p></div><div class="sc-66bc730f-2 irHvHG"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-ba37e1ab-2 kOvCyN"><main class="sc-11af7490-0 cFrzTj"><section class="sc-11af7490-1 cfbImy"><p>redux</p><h1>React reduxToolkit과 미들웨어 AsyncThunk 사용해보기</h1><span>2023-03-04</span></section><main class="sc-11af7490-2 gtQrim"><div class="markdown"><h1>ReduxToolkit</h1>
<p>리덕스 툴킷은 일반적인 리덕스보다 store 설정을 용이하게 해주고, 추가적인 패키지 설치가 필요하지 않게 설계되었으며, 보일러플레이트(여러 군데에서 반복되는 코드)를 최소화하기 위해 만들어졌다.</p>
<p>더 사용하기 쉽다는 의미이다. 이번 글에서는 미들웨어인 AsyncThunk와 함께 사용하는 방법을 확인할 수 있다.</p>
<h2>1. 설치</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-bash" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#ffc66d">yarn</span><span> </span><span class="token" style="color:#ffc66d">add</span><span> @reduxjs/toolkit react-redux</span></code></pre></pre>
<h2>2. store 생성</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// src/redux/store.js</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> configureStore </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@reduxjs/toolkit&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports">posts</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;./modules/postSlice&quot;</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// 만들어줄 Slice</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> store </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">configureStore</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">reducer</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    posts</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> store</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h2>3. 최상위 파일(index.js, App.js 등)에 Provider import해오기</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// import -- 기존 코드들 --</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports"> </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react-redux&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports">store</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;./redux/store&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> root </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token maybe-class-name">ReactDOM</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">createRoot</span><span class="token" style="color:#a9b7c6">(</span><span class="token dom" style="color:#9876aa">document</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">getElementById</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;root&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>root</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">render</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token maybe-class-name">Provider</span><span> store</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span>store</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token maybe-class-name">App</span><span> </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span class="token maybe-class-name">Provider</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<h2>4. 슬라이스 생성</h2>
<p>2번의 store에 import 해줄 파일이다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// postSlice.js</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> createAsyncThunk</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> createSlice </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@reduxjs/toolkit&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports">axios</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;axios&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#9876aa">BASE_URL</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#6a8759">&quot;http://localhost:3001&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> initialState </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#808080">// data, isLoading, error로 상태관리</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">posts</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">isLoading</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">error</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token null nil" style="color:#cc7832">null</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> getPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;GET_ALL_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> addPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;POST_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">post</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span> payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> updatePosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;UPDATAE_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">put</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>        </span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">payload</span><span class="token template-string interpolation" style="color:#a9b7c6">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        payload</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token maybe-class-name">DataTransfer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> deletePosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;DELETE_posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">delete</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">payload</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> postsSlice </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createSlice</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">name</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  initialState</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">reducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">extraReducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Pending */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>deletePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Fulfilled */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token spread" style="color:#a9b7c6">...</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">push</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>updatePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> newState </span><span class="token" style="color:#a9b7c6">=</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span>
</span><span>        action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span> </span><span class="token" style="color:#a9b7c6">===</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">?</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token spread" style="color:#a9b7c6">...</span><span>item</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token literal-property" style="color:#9876aa">content</span><span class="token" style="color:#a9b7c6">:</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">:</span><span> item</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> newState</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> state</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>deletePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> newState </span><span class="token" style="color:#a9b7c6">=</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">filter</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span> </span><span class="token" style="color:#a9b7c6">!==</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> newState</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> state</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Rejected */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">rejected</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">error</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> postsSlice</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">reducer</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>이 상태에서 Postman을 통해 json 서버를 이용하기 때문에 BASE_URL은 로컬 경로로 설정해줬다.</p>
<p>extraReducers 의 pending, fulfilled, rejected는 각각 대기중/성공/실패 정도로 생각하면 된다.</p>
<p>아래와 같이 PostMan을 통해 db.json에 데이터가 정상적으로 확인되면</p>
<p>포스트맨 사용법 : <a href="https://lee-yo-han.github.io/redux/redux%EC%99%80-mock-server-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">https://lee-yo-han.github.io/redux/redux와-mock-server-사용하기</a></p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fri6Yi%2FbtrMjiBl1Va%2FlCNsQyz5vPTIhIfBFfpC41%2Fimg.png" alt="image"/></p>
<p>아래와 같이 Redux hook을 통해 데이터를 자유롭게 사용할 수 있다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> getPosts </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;../redux/modules/postSlice&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> useEffect </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> useDispatch</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> useSelector </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react-redux&quot;</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// Redux hooks</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> </span><span class="token" style="color:#cc7832">function</span><span> </span><span class="token maybe-class-name" style="color:#ffc66d">Home</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> data </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useSelector</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// postSlice에 있는 전역 State 가져오기</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> dispatch </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useDispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">//dispatch 사용 준비</span><span>
</span>
<span>  </span><span class="token" style="color:#ffc66d">useEffect</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#ffc66d">dispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">getPosts</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// dispatch 사용 dispatch(액션함수())</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>redux랑 포스팅</span><span class="token" style="color:#9876aa">CRUD</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>데이터를 주세욥</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>ul</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">{</span><span>data</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">&lt;</span><span>li</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">nickname</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>li</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>ul</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></pre></pre>
<p>위의 코드에서는 액션 함수의 인자(괄호())가 비어있지만, Slice에 원하는 액션 함수들을 작성한 후 dispatch를 해줄때 데이터가 필요한 경우는 아래의 순서로 데이터가 처리된다고 생각하면 좋다.</p>
<h3>데이터 처리 순서</h3>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:#808080">// jsx component</span><span>
</span><span></span><span class="token" style="color:#ffc66d">dispath</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">액션함수</span><span class="token" style="color:#a9b7c6">(</span><span>id등의 데이터</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span>
</span>
<span></span><span class="token" style="color:#808080">// =&gt; postSlice 파일 내의 액션 함수</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> addPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#6a8759">&quot;POST_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token" style="color:#808080">// payload를 통해 데이터를 받고 아래 코드에서 처리할 수 있도록 함</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">post</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span> payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// 요청 성공 부분</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#808080">// =&gt; extraReducers</span><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> postsSlice </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createSlice</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">name</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  initialState</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">reducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">extraReducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">// ---- 생략 ----</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Fulfilled */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token" style="color:#808080">// 요청 성공 시, action 인자를 통해 state(전역 상태)를 관리해줄 수 있음 (ex action.payload .---)</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">push</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">// ---- 생략 ----</span></code></pre></pre>
<p>데이터가 정상적으로 화면으로 출력되는 것을 볼 수 있다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FKVbGZ%2FbtrMljZJHmV%2F3XHhLVMqFgXEAjz2HqKky0%2Fimg.png" alt="image"/></p>
<p>단, useSelector를 사용할 때, (state)=&gt;state... 부분은 데이터에 따라 값의 구조가 다를 수 있기 때문에, console.log()를 통해 데이터를 어떻게 받아오는지 확인하며 코드를 작성해주자.</p>
<h2>간단한 CRUD 적용 예시</h2>
<p><img src="https://blog.kakaocdn.net/dn/bDrG2e/btrMjWLhmxB/gsemxzlV7oyCzREe8oHOM1/img.gif" alt="image"/></p>
<h2>AsyncThunk를 사용한다는 것은</h2>
<p>공식문서 : <a href="https://redux-toolkit.js.org/api/createAsyncThunk">https://redux-toolkit.js.org/api/createAsyncThunk</a></p>
<p>공식 문서에 반환된 Promise를 기반으로 LifeCycle 작업을 전달하는 Thunk 작업 생성자를 반환해 비동기 요청 LifeCycle을 처리하기 위한 표준 권장 접근 방식을 추상화한다는 내용이 있다</p>
<p>이것은 위의 데이터 처리 순서로 설명한 것과 유사하다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> addPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#6a8759">&quot;POST_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">post</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span> payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  ↑↑↑ 이 부분에서 </span><span class="token known-class-name class-name">Promise</span><span>를 반환해주고
</span>
<!-- -->
<!-- -->
<!-- -->
<span> ↓↓↓↓ 이 부분에서 대기</span><span class="token" style="color:#a9b7c6">/</span><span>성공</span><span class="token" style="color:#a9b7c6">/</span><span>실패 로 구분해 데이터를 처리해준다
</span>
<span> </span><span class="token" style="color:#808080">//Panding</span><span>
</span><span> </span><span class="token" style="color:#808080">//Fulfilled</span><span>
</span><span> </span><span class="token spread" style="color:#a9b7c6">...</span><span>
</span>
<span> </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">push</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span> </span><span class="token" style="color:#808080">// 게시글을 추가했을때 처리해주는 방식</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span>
<span> </span><span class="token spread" style="color:#a9b7c6">...</span><span>
</span><span> </span><span class="token" style="color:#808080">//Rejected</span><span>
</span></code></pre></pre>
<h1>전체 예제코드</h1>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// Home.jsx</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports">
</span><span class="token imports">  deletePosts</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports">
</span><span class="token imports">  getPosts</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports">
</span><span class="token imports">  updatePosts</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports">
</span><span class="token imports">  addPosts</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports">
</span><span class="token imports"></span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;../redux/modules/postSlice&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> useState</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> useEffect </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> useDispatch</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> useSelector </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;react-redux&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> </span><span class="token" style="color:#cc7832">function</span><span> </span><span class="token maybe-class-name" style="color:#ffc66d">Home</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span>inputValue</span><span class="token" style="color:#a9b7c6">,</span><span> setInputValue</span><span class="token" style="color:#a9b7c6">]</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useState</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cc7832">const</span><span> data </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useSelector</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> dispatch </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">useDispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#ffc66d">useEffect</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#ffc66d">dispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">getPosts</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">addButton</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">let</span><span> addData </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9876aa">nickname</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;한삐&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9876aa">content</span><span class="token" style="color:#a9b7c6">:</span><span> inputValue</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#ffc66d">dispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">addPosts</span><span class="token" style="color:#a9b7c6">(</span><span>addData</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">deletButton</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token parameter">props</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#ffc66d">dispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">deletePosts</span><span class="token" style="color:#a9b7c6">(</span><span>props</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">editButton</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token parameter">props</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">let</span><span> updateData </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9876aa">id</span><span class="token" style="color:#a9b7c6">:</span><span> props</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9876aa">nickname</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;한삐&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9876aa">content</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;냠냠1231241214&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#ffc66d">dispatch</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#ffc66d">updatePosts</span><span class="token" style="color:#a9b7c6">(</span><span>updateData</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>  </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>redux랑 포스팅</span><span class="token" style="color:#9876aa">CRUD</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>데이터를 주세욥</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>p</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>input onChange</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token parameter">e</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#ffc66d">setInputValue</span><span class="token" style="color:#a9b7c6">(</span><span>e</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">target</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">value</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">}</span><span> type</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#6a8759">&quot;text&quot;</span><span> </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span>addButton</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>글쓰기</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span>ul</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">{</span><span>data</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">&lt;</span><span>li key</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>br </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">nickname</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>br </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>span</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>br </span><span class="token" style="color:#a9b7c6">/</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#ffc66d">editButton</span><span class="token" style="color:#a9b7c6">(</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>수정</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>              </span><span class="token" style="color:#a9b7c6">&lt;</span><span>button onClick</span><span class="token" style="color:#a9b7c6">=</span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#ffc66d">deletButton</span><span class="token" style="color:#a9b7c6">(</span><span>item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">&gt;</span><span>삭제</span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>button</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>li</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>ul</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">&lt;</span><span class="token" style="color:#a9b7c6">/</span><span>div</span><span class="token" style="color:#a9b7c6">&gt;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></pre></pre>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// store.js</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> configureStore </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@reduxjs/toolkit&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports">posts</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;./modules/postSlice&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> store </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">configureStore</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">reducer</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    posts</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> store</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#808080">// postSlice.js</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> createAsyncThunk</span><span class="token imports" style="color:#a9b7c6">,</span><span class="token imports"> createSlice </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@reduxjs/toolkit&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">{</span><span class="token imports"> current </span><span class="token imports" style="color:#a9b7c6">}</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;@reduxjs/toolkit&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports">axios</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&quot;axios&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#9876aa">BASE_URL</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#6a8759">&quot;http://localhost:3001&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> initialState </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#808080">// data, isLoading, error로 상태관리</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">posts</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">isLoading</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">error</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token null nil" style="color:#cc7832">null</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> getPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;GET_ALL_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> addPosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;POST_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">post</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span> payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>errer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> updatePosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;UPDATAE_Posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> data </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">put</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>        </span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">payload</span><span class="token template-string interpolation" style="color:#a9b7c6">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        payload</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;data&quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token maybe-class-name">DataTransfer</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>data</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">data</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> deletePosts </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createAsyncThunk</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;DELETE_posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">payload</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> thunkAPI</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">try</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">delete</span><span class="token" style="color:#a9b7c6">(</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/posts/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">payload</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">fulfillWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span> </span><span class="token control-flow" style="color:#cc7832">catch</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> thunkAPI</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">rejectWithValue</span><span class="token" style="color:#a9b7c6">(</span><span>error</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token" style="color:#cc7832">const</span><span> postsSlice </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#ffc66d">createSlice</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">name</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;posts&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  initialState</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">reducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">extraReducers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Pending */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>deletePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">pending</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">true</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Fulfilled */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span class="token spread" style="color:#a9b7c6">...</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>addPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">push</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>updatePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token console class-name">console</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">log</span><span class="token" style="color:#a9b7c6">(</span><span>action</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> newState </span><span class="token" style="color:#a9b7c6">=</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span>
</span><span>        action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span> </span><span class="token" style="color:#a9b7c6">===</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">?</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span> </span><span class="token spread" style="color:#a9b7c6">...</span><span>item</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token literal-property" style="color:#9876aa">content</span><span class="token" style="color:#a9b7c6">:</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span> </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">:</span><span> item</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> newState</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> state</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>deletePosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">fulfilled</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> newState </span><span class="token" style="color:#a9b7c6">=</span><span> state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">filter</span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">id</span><span> </span><span class="token" style="color:#a9b7c6">!==</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">meta</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">arg</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">posts</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> newState</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> state</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#808080">/* Rejected */</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">[</span><span>getPosts</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">rejected</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">state</span><span class="token parameter" style="color:#a9b7c6">,</span><span class="token parameter"> action</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">isLoading</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">false</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      state</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">error</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> action</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">payload</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token module" style="color:#cc7832">export</span><span> </span><span class="token module" style="color:#cc7832">default</span><span> postsSlice</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">reducer</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre></div></main><div class="sc-b56d1f4e-0 btKgLL"><p><strong>&quot;redux&quot;</strong> <!-- -->카테고리의 다른 글</p><ul class="sc-b56d1f4e-1 isPGIu"></ul></div><div class="sc-11af7490-3 hHZXdG"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-a8eb4d0-0 hPXHcC"><nav class="sc-4a95414f-0 lfKWEG"><ul class="sc-4a95414f-1 dWXXgn"><li>Category</li><li class="sc-4a95414f-2 qcuRA"><a href="/blog">Simple Memo</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/html">HTML</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/css">CSS</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/javascript">JavaScript</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/typescript">TypeScript</a></li><li style="color:white;font-weight:bold" class="sc-4a95414f-2 qcuRA"><a href="/redux">Redux</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/react">React</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/nextjs">Nextjs</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/nestjs">Nestjs</a></li></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"redux toolkit async thunk","description":"React reduxToolkit과 미들웨어 AsyncThunk 사용해보기","category":"redux","date":"2023-03-04","content":"\r\n# ReduxToolkit\r\n\r\n리덕스 툴킷은 일반적인 리덕스보다 store 설정을 용이하게 해주고, 추가적인 패키지 설치가 필요하지 않게 설계되었으며, 보일러플레이트(여러 군데에서 반복되는 코드)를 최소화하기 위해 만들어졌다.\r\n\r\n더 사용하기 쉽다는 의미이다. 이번 글에서는 미들웨어인 AsyncThunk와 함께 사용하는 방법을 확인할 수 있다.\r\n\r\n## 1. 설치\r\n\r\n```bash\r\nyarn add @reduxjs/toolkit react-redux\r\n```\r\n\r\n## 2. store 생성\r\n\r\n```javascript\r\n// src/redux/store.js\r\n\r\nimport { configureStore } from \"@reduxjs/toolkit\";\r\nimport posts from \"./modules/postSlice\"; // 만들어줄 Slice\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    posts,\r\n  },\r\n});\r\nexport default store;\r\n```\r\n\r\n## 3. 최상위 파일(index.js, App.js 등)에 Provider import해오기\r\n\r\n```javascript\r\n// import -- 기존 코드들 --\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./redux/store\";\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\r\nroot.render(\r\n  \u003cProvider store={store}\u003e\r\n    \u003cApp /\u003e\r\n  \u003c/Provider\u003e,\r\n);\r\n```\r\n\r\n## 4. 슬라이스 생성\r\n\r\n2번의 store에 import 해줄 파일이다.\r\n\r\n```javascript\r\n// postSlice.js\r\n\r\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"http://localhost:3001\";\r\n\r\nconst initialState = {\r\n  // data, isLoading, error로 상태관리\r\n  posts: [],\r\n  isLoading: false,\r\n  error: null,\r\n};\r\n\r\nexport const getPosts = createAsyncThunk(\r\n  \"GET_ALL_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      const { data } = await axios.get(`${BASE_URL}/posts`);\r\n      return thunkAPI.fulfillWithValue(data);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addPosts = createAsyncThunk(\r\n  \"POST_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      const { data } = await axios.post(`${BASE_URL}/posts`, payload);\r\n      console.log(\"data\", data);\r\n      return thunkAPI.fulfillWithValue(data);\r\n    } catch (errer) {\r\n      return thunkAPI.rejectWithValue(errer);\r\n    }\r\n  },\r\n);\r\n\r\nexport const updatePosts = createAsyncThunk(\r\n  \"UPDATAE_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      console.log(payload);\r\n      const { data } = await axios.put(\r\n        `${BASE_URL}/posts/${payload.id}`,\r\n        payload,\r\n      );\r\n      console.log(\"data\", DataTransfer);\r\n      return thunkAPI.fulfillWithValue(data.data);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deletePosts = createAsyncThunk(\r\n  \"DELETE_posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      await axios.delete(`${BASE_URL}/posts/${payload}`);\r\n      return thunkAPI.fulfillWithValue(payload);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const postsSlice = createSlice({\r\n  name: \"posts\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    /* Pending */\r\n    [getPosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    [addPosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    [deletePosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    /* Fulfilled */\r\n    [getPosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      console.log(action);\r\n      state.posts = [...action.payload];\r\n    },\r\n    [addPosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      state.posts.push(action.payload);\r\n    },\r\n    [updatePosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      console.log(action);\r\n      const newState = state.posts.map(item =\u003e\r\n        action.meta.arg.id === item.id\r\n          ? { ...item, content: action.meta.arg.content }\r\n          : item,\r\n      );\r\n      state.posts = newState;\r\n      return state;\r\n    },\r\n    [deletePosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      const newState = state.posts.filter(item =\u003e item.id !== action.meta.arg);\r\n      state.posts = newState;\r\n      return state;\r\n    },\r\n    /* Rejected */\r\n    [getPosts.rejected]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport default postsSlice.reducer;\r\n```\r\n\r\n이 상태에서 Postman을 통해 json 서버를 이용하기 때문에 BASE_URL은 로컬 경로로 설정해줬다.\r\n\r\nextraReducers 의 pending, fulfilled, rejected는 각각 대기중/성공/실패 정도로 생각하면 된다.\r\n\r\n아래와 같이 PostMan을 통해 db.json에 데이터가 정상적으로 확인되면\r\n\r\n포스트맨 사용법 : https://lee-yo-han.github.io/redux/redux와-mock-server-사용하기\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fri6Yi%2FbtrMjiBl1Va%2FlCNsQyz5vPTIhIfBFfpC41%2Fimg.png)\r\n\r\n아래와 같이 Redux hook을 통해 데이터를 자유롭게 사용할 수 있다.\r\n\r\n```javascript\r\nimport { getPosts } from \"../redux/modules/postSlice\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\"; // Redux hooks\r\n\r\nexport default function Home() {\r\n  const data = useSelector(state =\u003e state.posts.posts); // postSlice에 있는 전역 State 가져오기\r\n  const dispatch = useDispatch(); //dispatch 사용 준비\r\n\r\n  useEffect(() =\u003e {\r\n    dispatch(getPosts()); // dispatch 사용 dispatch(액션함수())\r\n  }, []);\r\n\r\n  console.log(data);\r\n\r\n  return (\r\n    \u003cdiv\u003e\r\n      \u003cp\u003eredux랑 포스팅CRUD\u003c/p\u003e\r\n      \u003cp\u003e데이터를 주세욥\u003c/p\u003e\r\n      \u003cul\u003e\r\n        {data.map(item =\u003e (\r\n          \u003cli\u003e\r\n            \u003cspan\u003e{item.id}\u003c/span\u003e\r\n            \u003cspan\u003e{item.nickname}\u003c/span\u003e\r\n            \u003cspan\u003e{item.content}\u003c/span\u003e\r\n          \u003c/li\u003e\r\n        ))}\r\n      \u003c/ul\u003e\r\n    \u003c/div\u003e\r\n  );\r\n}\r\n```\r\n\r\n위의 코드에서는 액션 함수의 인자(괄호())가 비어있지만, Slice에 원하는 액션 함수들을 작성한 후 dispatch를 해줄때 데이터가 필요한 경우는 아래의 순서로 데이터가 처리된다고 생각하면 좋다.\r\n\r\n### 데이터 처리 순서\r\n\r\n```javascript\r\n\r\n// jsx component\r\ndispath(액션함수(id등의 데이터))\r\n\r\n// =\u003e postSlice 파일 내의 액션 함수\r\nexport const addPosts = createAsyncThunk(\r\n    \"POST_Posts\",\r\n    async (payload, thunkAPI) =\u003e { // payload를 통해 데이터를 받고 아래 코드에서 처리할 수 있도록 함\r\n      try {\r\n        const { data } = await axios.post(`${BASE_URL}/posts`, payload);\r\n        console.log(\"data\", data);\r\n        return thunkAPI.fulfillWithValue(data); // 요청 성공 부분\r\n      } catch (errer) {\r\n        return thunkAPI.rejectWithValue(errer);\r\n      }\r\n    }\r\n  );\r\n\r\n// =\u003e extraReducers\r\nexport const postsSlice = createSlice({\r\n  name: \"posts\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    // ---- 생략 ----\r\n    /* Fulfilled */\r\n    [addPosts.fulfilled]: (state, action) =\u003e { // 요청 성공 시, action 인자를 통해 state(전역 상태)를 관리해줄 수 있음 (ex action.payload .---)\r\n      state.isLoading = false;\r\n      state.posts.push(action.payload);\r\n    },\r\n    // ---- 생략 ----\r\n```\r\n\r\n데이터가 정상적으로 화면으로 출력되는 것을 볼 수 있다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FKVbGZ%2FbtrMljZJHmV%2F3XHhLVMqFgXEAjz2HqKky0%2Fimg.png)\r\n\r\n단, useSelector를 사용할 때, (state)=\u003estate... 부분은 데이터에 따라 값의 구조가 다를 수 있기 때문에, console.log()를 통해 데이터를 어떻게 받아오는지 확인하며 코드를 작성해주자.\r\n\r\n## 간단한 CRUD 적용 예시\r\n\r\n![image](https://blog.kakaocdn.net/dn/bDrG2e/btrMjWLhmxB/gsemxzlV7oyCzREe8oHOM1/img.gif)\r\n\r\n## AsyncThunk를 사용한다는 것은\r\n\r\n공식문서 : https://redux-toolkit.js.org/api/createAsyncThunk\r\n\r\n공식 문서에 반환된 Promise를 기반으로 LifeCycle 작업을 전달하는 Thunk 작업 생성자를 반환해 비동기 요청 LifeCycle을 처리하기 위한 표준 권장 접근 방식을 추상화한다는 내용이 있다\r\n\r\n이것은 위의 데이터 처리 순서로 설명한 것과 유사하다.\r\n\r\n```javascript\r\n\r\nexport const addPosts = createAsyncThunk(\r\n    \"POST_Posts\",\r\n    async (payload, thunkAPI) =\u003e {\r\n      try {\r\n        const { data } = await axios.post(`${BASE_URL}/posts`, payload);\r\n        console.log(\"data\", data);\r\n        return thunkAPI.fulfillWithValue(data);\r\n      } catch (errer) {\r\n        return thunkAPI.rejectWithValue(errer);\r\n      }\r\n    }\r\n  );\r\n\r\n  ↑↑↑ 이 부분에서 Promise를 반환해주고\r\n\r\n\r\n\r\n\r\n ↓↓↓↓ 이 부분에서 대기/성공/실패 로 구분해 데이터를 처리해준다\r\n\r\n //Panding\r\n //Fulfilled\r\n ...\r\n\r\n [addPosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      state.posts.push(action.payload); // 게시글을 추가했을때 처리해주는 방식\r\n    },\r\n\r\n ...\r\n //Rejected\r\n\r\n```\r\n\r\n# 전체 예제코드\r\n\r\n```javascript\r\n// Home.jsx\r\n\r\nimport {\r\n  deletePosts,\r\n  getPosts,\r\n  updatePosts,\r\n  addPosts,\r\n} from \"../redux/modules/postSlice\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nexport default function Home() {\r\n  const [inputValue, setInputValue] = useState();\r\n\r\n  const data = useSelector(state =\u003e state.posts.posts);\r\n  const dispatch = useDispatch();\r\n  useEffect(() =\u003e {\r\n    dispatch(getPosts());\r\n  }, []);\r\n  console.log(data);\r\n\r\n  const addButton = () =\u003e {\r\n    let addData = {\r\n      nickname: \"한삐\",\r\n      content: inputValue,\r\n    };\r\n    dispatch(addPosts(addData));\r\n  };\r\n\r\n  const deletButton = props =\u003e {\r\n    dispatch(deletePosts(props));\r\n  };\r\n\r\n  const editButton = props =\u003e {\r\n    let updateData = {\r\n      id: props,\r\n      nickname: \"한삐\",\r\n      content: \"냠냠1231241214\",\r\n    };\r\n    dispatch(updatePosts(updateData));\r\n  };\r\n\r\n  return (\r\n    \u003cdiv\u003e\r\n      \u003cp\u003eredux랑 포스팅CRUD\u003c/p\u003e\r\n      \u003cp\u003e데이터를 주세욥\u003c/p\u003e\r\n      \u003cinput onChange={e =\u003e setInputValue(e.target.value)} type=\"text\" /\u003e\r\n      \u003cbutton onClick={addButton}\u003e글쓰기\u003c/button\u003e\r\n      \u003cul\u003e\r\n        {data.map(item =\u003e (\r\n          \u003cli key={item.id}\u003e\r\n            \u003cdiv\u003e\r\n              \u003cspan\u003e{item.id}\u003c/span\u003e\r\n              \u003cbr /\u003e\r\n              \u003cspan\u003e{item.nickname}\u003c/span\u003e\r\n              \u003cbr /\u003e\r\n              \u003cspan\u003e{item.content}\u003c/span\u003e\r\n              \u003cbr /\u003e\r\n            \u003c/div\u003e\r\n            \u003cdiv\u003e\r\n              \u003cbutton onClick={() =\u003e editButton(item.id)}\u003e수정\u003c/button\u003e\r\n              \u003cbutton onClick={() =\u003e deletButton(item.id)}\u003e삭제\u003c/button\u003e\r\n            \u003c/div\u003e\r\n          \u003c/li\u003e\r\n        ))}\r\n      \u003c/ul\u003e\r\n    \u003c/div\u003e\r\n  );\r\n}\r\n```\r\n\r\n```javascript\r\n// store.js\r\nimport { configureStore } from \"@reduxjs/toolkit\";\r\nimport posts from \"./modules/postSlice\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    posts,\r\n  },\r\n});\r\n\r\nexport default store;\r\n```\r\n\r\n```javascript\r\n// postSlice.js\r\n\r\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { current } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"http://localhost:3001\";\r\n\r\nconst initialState = {\r\n  // data, isLoading, error로 상태관리\r\n  posts: [],\r\n  isLoading: false,\r\n  error: null,\r\n};\r\n\r\nexport const getPosts = createAsyncThunk(\r\n  \"GET_ALL_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      const { data } = await axios.get(`${BASE_URL}/posts`);\r\n      return thunkAPI.fulfillWithValue(data);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addPosts = createAsyncThunk(\r\n  \"POST_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      const { data } = await axios.post(`${BASE_URL}/posts`, payload);\r\n      console.log(\"data\", data);\r\n      return thunkAPI.fulfillWithValue(data);\r\n    } catch (errer) {\r\n      return thunkAPI.rejectWithValue(errer);\r\n    }\r\n  },\r\n);\r\n\r\nexport const updatePosts = createAsyncThunk(\r\n  \"UPDATAE_Posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      console.log(payload);\r\n      const { data } = await axios.put(\r\n        `${BASE_URL}/posts/${payload.id}`,\r\n        payload,\r\n      );\r\n      console.log(\"data\", DataTransfer);\r\n      return thunkAPI.fulfillWithValue(data.data);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deletePosts = createAsyncThunk(\r\n  \"DELETE_posts\",\r\n  async (payload, thunkAPI) =\u003e {\r\n    try {\r\n      await axios.delete(`${BASE_URL}/posts/${payload}`);\r\n      return thunkAPI.fulfillWithValue(payload);\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const postsSlice = createSlice({\r\n  name: \"posts\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    /* Pending */\r\n    [getPosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    [addPosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    [deletePosts.pending]: (state, action) =\u003e {\r\n      state.isLoading = true;\r\n    },\r\n    /* Fulfilled */\r\n    [getPosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      console.log(action);\r\n      state.posts = [...action.payload];\r\n    },\r\n    [addPosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      state.posts.push(action.payload);\r\n    },\r\n    [updatePosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      console.log(action);\r\n      const newState = state.posts.map(item =\u003e\r\n        action.meta.arg.id === item.id\r\n          ? { ...item, content: action.meta.arg.content }\r\n          : item,\r\n      );\r\n      state.posts = newState;\r\n      return state;\r\n    },\r\n    [deletePosts.fulfilled]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      const newState = state.posts.filter(item =\u003e item.id !== action.meta.arg);\r\n      state.posts = newState;\r\n      return state;\r\n    },\r\n    /* Rejected */\r\n    [getPosts.rejected]: (state, action) =\u003e {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport default postsSlice.reducer;\r\n```\r\n"},"__N_SSG":true},"page":"/redux/[slug]","query":{"slug":"redux-toolkit-async-thunk"},"buildId":"_Kz-w44CnRMqZ_Rgxmu4u","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>