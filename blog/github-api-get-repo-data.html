<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Rain Sugar BangBang Front-End</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="GithubAPI를 이용한 repository 내 Markdown 파일 정보 불러오기"/><meta name="keywords" content="github, github-github api get repo data"/><meta http-equiv="subject" content="github"/><meta property="og:title" content="github api get repo data"/><meta property="og:description" content="GithubAPI를 이용한 repository 내 Markdown 파일 정보 불러오기"/><meta property="og:image" content="../images/GITHUB.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/b4f97ab2e5eec96e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b4f97ab2e5eec96e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f164db4954bac6ec.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0613093c3b45bf1f.js" defer=""></script><script src="/_next/static/chunks/572-f075c46b792eab08.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f6cf49907c2dfeb4.js" defer=""></script><script src="/_next/static/28QPTiPzA3wGlp3G3jzUU/_buildManifest.js" defer=""></script><script src="/_next/static/28QPTiPzA3wGlp3G3jzUU/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="sc-fc886cc0-0 bZSIAs"><h1>Rain Sugar BangBang</h1></header><div class="sc-ba37e1ab-0 jsuXVA"><section class="sc-ba37e1ab-1 flRwaC"><aside class="sc-66bc730f-0 khiCBg"><div class="sc-66bc730f-1 IEUha"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="https://avatars.githubusercontent.com/u/85297720?v=4"/><p>Hanbbi</p></div><div class="sc-66bc730f-2 irHvHG"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-ba37e1ab-2 kOvCyN"><main class="sc-b1521f6d-0 gZBrfW"><section class="sc-b1521f6d-1 dITxBi"><p>github</p><h1>GithubAPI를 이용한 repository 내 Markdown 파일 정보 불러오기</h1><span>2023-03-13</span></section><main class="sc-b1521f6d-2 kyUxSa"><div class="markdown"><h1>Github REST API 설명서</h1>
<p><a href="https://docs.github.com/ko/rest?apiVersion=2022-11-28">https://docs.github.com/ko/rest?apiVersion=2022-11-28</a></p>
<h2>GithubAPI 이용 시 토큰이 필요한 경우 아래와 같이 토큰 발급도 가능하다.</h2>
<ul>
<li>우측 상단의 프로필을 통해 Settings 접근</li>
</ul>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc5d9NT%2Fbtr3XWt2ipS%2FlVrpZru5irR5mDft0cLaO0%2Fimg.png" alt="image"/></p>
<ul>
<li>좌측 하단의 Developer settings 접속</li>
</ul>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdnMYAN%2Fbtr37uQgb1j%2Fz3lG0JXTBq5gkIhvk1HEek%2Fimg.png" alt="image"/></p>
<ul>
<li>Tokens나 Fine-grained tokens를 통해 원하는 권한들을 설정해 토큰을 생성할 수 있다.</li>
</ul>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcKOqYU%2Fbtr3V6YgATa%2Fc3QmI12TDR3vgoNL0ZTZR1%2Fimg.png" alt="image"/></p>
<blockquote>
<p>Github 홈페이지에 여러 api들이 많기 때문에 필요에 따라 사용하면 좋을 것 같다. 이 글에서는 repository 안의 파일들의 정보만을 가져올 것이다.</p>
</blockquote>
<h2>1. requestURL</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#9876aa">BASE_URL</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span>
</span><span>  </span><span class="token" style="color:#6a8759">&quot;https://api.github.com/repos/{유저명을 포함한/레포지토리 이름}/contents/{데이터를 가져올 디렉토리}&quot;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#cc7832">const</span><span> options </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9876aa">headers</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token string-property" style="color:#9876aa">&quot;Content-Type&quot;</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#6a8759">&quot;application/json&quot;</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>예를 들어 src의 posting이라는 디렉토리의 데이터들을 가져오고 싶다면</p>
<p><a href="https://api.github.com/repos/name/some-repo/contents/src/posting">https://api.github.com/repos/name/some-repo/contents/src/posting</a></p>
<p>정도가 될 수 있다.</p>
<p>요청이 정상적으로 작동했다면 아래와 같이 데이터를 받을 수 있다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FXHDFb%2Fbtr3WcDXFiZ%2FmFW3Q3uyQPHEOBpkOFVKA0%2Fimg.png" alt="image"/></p>
<p>하지만 하나의 파일에 대한 구체적인 정보는 들어있지 않다.</p>
<p>한 단계로 더 들어가 정보를 받아온다면 아래와 같은 base64로 인코딩된 content 데이터를 받아올 수 있다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcaVD0e%2Fbtr38M4cfZ6%2FMLUYZ4OarG3pXvjnSCW7VK%2Fimg.png" alt="image"/></p>
<h2>2. decoding</h2>
<p>해당 콘텐츠의 데이터를 정상적으로 받아오기 위해서는 디코딩이 필요하다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">eachMarkdown</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>name</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> url </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">categoryName</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> response </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span>url</span><span class="token" style="color:#a9b7c6">,</span><span> options</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> content </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token maybe-class-name">Buffer</span><span class="token" style="color:#a9b7c6">.</span><span class="token module" style="color:#cc7832">from</span><span class="token" style="color:#a9b7c6">(</span><span>response</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">data</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;base64&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">toString</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span>    </span><span class="token spread" style="color:#a9b7c6">...</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>content 데이터를 추출하고 콘솔을 확인하면 아래와 같이 string을 받아볼 수 있다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Flctvp%2Fbtr38LKZ6o1%2FnwU9EK44kJmKCfanQsdw0K%2Fimg.png" alt="image"/></p>
<h2>3. 데이터 가공</h2>
<p>캡쳐 이미지 아래로 마크다운 파일의 본문들이 함께 있지만, 내가 필요한 부분은 머리말 부분이기 때문에 이 데이터를 추출해야 했다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">eachMarkdown</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>name</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#e8bf6a">string</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> url </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation" style="color:#9876aa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">categoryName</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string" style="color:#6a8759">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation" style="color:#a9b7c6">}</span><span class="token template-string template-punctuation" style="color:#6a8759">`</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> response </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> axios</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">get</span><span class="token" style="color:#a9b7c6">(</span><span>url</span><span class="token" style="color:#a9b7c6">,</span><span> options</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> content </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token maybe-class-name">Buffer</span><span class="token" style="color:#a9b7c6">.</span><span class="token module" style="color:#cc7832">from</span><span class="token" style="color:#a9b7c6">(</span><span>response</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">data</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">content</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;base64&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">toString</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#cc7832">const</span><span> frontmatter </span><span class="token" style="color:#a9b7c6">=</span><span> content</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">match</span><span class="token" style="color:#a9b7c6">(</span><span class="token regex-delimiter" style="background:#364135">/</span><span class="token regex-source language-regex" style="background:#364135">^---\n([\s\S]+?)\n---</span><span class="token regex-delimiter" style="background:#364135">/</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token control-flow" style="color:#cc7832">if</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>frontmatter</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> matters </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token known-class-name class-name">JSON</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">stringify</span><span class="token" style="color:#a9b7c6">(</span><span>frontmatter</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">0</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">split</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;\\n&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> dateRegex </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token regex-delimiter" style="background:#364135">/</span><span class="token regex-source language-regex" style="background:#364135">\d{4}-\d{2}-\d{2}</span><span class="token regex-delimiter" style="background:#364135">/</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> match </span><span class="token" style="color:#a9b7c6">=</span><span> matters</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">4</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">match</span><span class="token" style="color:#a9b7c6">(</span><span>dateRegex</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">if</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>match</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> result </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        title</span><span class="token" style="color:#a9b7c6">:</span><span> matters</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">split</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;title: &quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">replaceAll</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot; &quot;</span><span class="token" style="color:#a9b7c6">,</span><span> </span><span class="token" style="color:#6a8759">&quot;-&quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        description</span><span class="token" style="color:#a9b7c6">:</span><span> matters</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">2</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">split</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;description: &quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        category</span><span class="token" style="color:#a9b7c6">:</span><span> matters</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">3</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">split</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#6a8759">&quot;category: &quot;</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">1</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        date</span><span class="token" style="color:#a9b7c6">:</span><span> match</span><span class="token" style="color:#a9b7c6">[</span><span class="token" style="color:#6897bb">0</span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">;</span></code></pre></pre>
<p>상수 frontmatter는 머리말을 가져오지만 예쁘게 가져오진 않는다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FTC1yi%2Fbtr35bRukP2%2FnWJ0mgeFgu2LlEBk0KyupK%2Fimg.png" alt="image"/></p>
<p>때문에 if(frontmatter){...}와 같이 필요한 데이터를 정규식이나 string메서드를 통해 원하는대로 가공해 사용하여 사용해야 한다.</p></div></main><div class="sc-5ec7822c-0 fTGzH"><p><strong>&quot;Simple Memo&quot;</strong> <!-- -->카테고리의 다른 글</p><ul class="sc-5ec7822c-1 cpVRfm"></ul></div><div class="sc-b1521f6d-3 gCoGbC"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-a8eb4d0-0 hPXHcC"><nav class="sc-4a95414f-0 lfKWEG"><ul class="sc-4a95414f-1 dWXXgn"><li>Category</li><li style="color:white;font-weight:bold" class="sc-4a95414f-2 qcuRA"><a href="/blog">Simple Memo</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/html">HTML</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/css">CSS</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/javascript">JavaScript</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/typescript">TypeScript</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/redux">Redux</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/react">React</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/nextjs">Nextjs</a></li><li class="sc-4a95414f-2 qcuRA"><a href="/nestjs">Nestjs</a></li></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"github api get repo data","description":"GithubAPI를 이용한 repository 내 Markdown 파일 정보 불러오기","category":"github","date":"2023-03-13","content":"\r\n# Github REST API 설명서\r\n\r\nhttps://docs.github.com/ko/rest?apiVersion=2022-11-28\r\n\r\n## GithubAPI 이용 시 토큰이 필요한 경우 아래와 같이 토큰 발급도 가능하다.\r\n\r\n- 우측 상단의 프로필을 통해 Settings 접근\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc5d9NT%2Fbtr3XWt2ipS%2FlVrpZru5irR5mDft0cLaO0%2Fimg.png)\r\n\r\n- 좌측 하단의 Developer settings 접속\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdnMYAN%2Fbtr37uQgb1j%2Fz3lG0JXTBq5gkIhvk1HEek%2Fimg.png)\r\n\r\n- Tokens나 Fine-grained tokens를 통해 원하는 권한들을 설정해 토큰을 생성할 수 있다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcKOqYU%2Fbtr3V6YgATa%2Fc3QmI12TDR3vgoNL0ZTZR1%2Fimg.png)\r\n\r\n\u003e Github 홈페이지에 여러 api들이 많기 때문에 필요에 따라 사용하면 좋을 것 같다. 이 글에서는 repository 안의 파일들의 정보만을 가져올 것이다.\r\n\r\n## 1. requestURL\r\n\r\n```javascript\r\nconst BASE_URL =\r\n  \"https://api.github.com/repos/{유저명을 포함한/레포지토리 이름}/contents/{데이터를 가져올 디렉토리}\";\r\nconst options = {\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n```\r\n\r\n예를 들어 src의 posting이라는 디렉토리의 데이터들을 가져오고 싶다면\r\n\r\nhttps://api.github.com/repos/name/some-repo/contents/src/posting\r\n\r\n정도가 될 수 있다.\r\n\r\n요청이 정상적으로 작동했다면 아래와 같이 데이터를 받을 수 있다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FXHDFb%2Fbtr3WcDXFiZ%2FmFW3Q3uyQPHEOBpkOFVKA0%2Fimg.png)\r\n\r\n하지만 하나의 파일에 대한 구체적인 정보는 들어있지 않다.\r\n\r\n한 단계로 더 들어가 정보를 받아온다면 아래와 같은 base64로 인코딩된 content 데이터를 받아올 수 있다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcaVD0e%2Fbtr38M4cfZ6%2FMLUYZ4OarG3pXvjnSCW7VK%2Fimg.png)\r\n\r\n## 2. decoding\r\n\r\n해당 콘텐츠의 데이터를 정상적으로 받아오기 위해서는 디코딩이 필요하다.\r\n\r\n```typescript\r\nconst eachMarkdown = async (name: string) =\u003e {\r\n    const url = `${BASE_URL}/${categoryName}/${name}`;\r\n    const response = await axios.get(url, options);\r\n    const content = Buffer.from(response.data.content, \"base64\").toString();\r\n\r\n    ...\r\n};\r\n```\r\n\r\ncontent 데이터를 추출하고 콘솔을 확인하면 아래와 같이 string을 받아볼 수 있다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Flctvp%2Fbtr38LKZ6o1%2FnwU9EK44kJmKCfanQsdw0K%2Fimg.png)\r\n\r\n## 3. 데이터 가공\r\n\r\n캡쳐 이미지 아래로 마크다운 파일의 본문들이 함께 있지만, 내가 필요한 부분은 머리말 부분이기 때문에 이 데이터를 추출해야 했다.\r\n\r\n```typescript\r\nconst eachMarkdown = async (name: string) =\u003e {\r\n  const url = `${BASE_URL}/${categoryName}/${name}`;\r\n  const response = await axios.get(url, options);\r\n  const content = Buffer.from(response.data.content, \"base64\").toString();\r\n  const frontmatter = content.match(/^---\\n([\\s\\S]+?)\\n---/);\r\n  if (frontmatter) {\r\n    const matters = JSON.stringify(frontmatter[0]).split(\"\\\\n\");\r\n    const dateRegex = /\\d{4}-\\d{2}-\\d{2}/;\r\n    const match = matters[4].match(dateRegex);\r\n    if (match) {\r\n      const result = {\r\n        title: matters[1].split(\"title: \")[1].replaceAll(\" \", \"-\"),\r\n        description: matters[2].split(\"description: \")[1],\r\n        category: matters[3].split(\"category: \")[1],\r\n        date: match[0],\r\n      };\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n상수 frontmatter는 머리말을 가져오지만 예쁘게 가져오진 않는다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FTC1yi%2Fbtr35bRukP2%2FnWJ0mgeFgu2LlEBk0KyupK%2Fimg.png)\r\n\r\n때문에 if(frontmatter){...}와 같이 필요한 데이터를 정규식이나 string메서드를 통해 원하는대로 가공해 사용하여 사용해야 한다.\r\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"github-api-get-repo-data"},"buildId":"28QPTiPzA3wGlp3G3jzUU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>