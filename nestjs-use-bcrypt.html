<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Rain Sugar BangBang Front-End</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="Nestjs에서 bcrypt 사용하기"/><meta name="keywords" content="nestjs, nestjs use bcrypt"/><meta http-equiv="title" content="Nestjs에서 bcrypt 사용하기"/><meta http-equiv="subject" content="nestjs"/><meta property="og:title" content="nestjs use bcrypt"/><meta property="og:description" content="Nestjs에서 bcrypt 사용하기"/><meta property="og:image" content="/images/cards/NESTJS.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="14"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f9bc783e634631d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f9bc783e634631d2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7d0bddee48749f95.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-80b9c37206a02b35.js" defer=""></script><script src="/_next/static/chunks/0-225a49c07b374aea.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-74f624fdf837c2ca.js" defer=""></script><script src="/_next/static/tGE6jCvqtjQ0QiPDqI9WB/_buildManifest.js" defer=""></script><script src="/_next/static/tGE6jCvqtjQ0QiPDqI9WB/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-c845a976-0 icUnkm"><header class="sc-fe6a8-0 fZHroo"><span style="display:none" class="sc-fe6a8-1 kOlYBJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 17 17" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g></g><path d="M16 3v2h-15v-2h15zM1 10h15v-2h-15v2zM1 15h15v-2h-15v2z"></path></svg></span><h1><a href="/">Rain Sugar BangBang</a></h1><span style="display:none" class="sc-fe6a8-1 kOlYBJ"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></span></header><section class="sc-c845a976-1 bePtAz"><aside class="sc-226f6af7-0 jzKfYm"><div class="sc-226f6af7-1 eudLNA"><a target="_blank" href="https://portfolio-sigma-wheat-63.vercel.app/"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="/images/profileImage/cat.png"/><span>Go Profile!</span></a><p>Hanbbi</p></div><div class="sc-226f6af7-2 fEJwOM"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-c845a976-2 jRRSKe"><main class="sc-e9ba6bf1-0 cAjCIB"><section class="sc-e9ba6bf1-1 eQOsDg"><p>nestjs</p><h1>Nestjs에서 bcrypt 사용하기</h1><span>2023-04-13</span></section><main class="sc-e9ba6bf1-2 dkijLv"><div class="markdown"><h2>bycrypt란?</h2>
<p>비밀번호 등을 안전하게 암호화하여 저장하고 검증할 수 있도록 도와주는 라이브러리로, 랜덤한 salt를 생성하고 이를 비밀번호와 함께 암호화하여 저장한다. 이후 비밀번호 검증 시에도 같은 salt를 사용하여 입력받은 비밀번호를 암호화한 후, 저장된 암호화된 비밀번호와 비교하여 일치하는지 검증한다.</p>
<p>bcrypt는 암호화 강도를 선택할 수 있는 기능을 제공한다. 기본값은 10으로, 숫자가 클수록 강도가 높아지며 암호화에 소요되는 시간도 늘어난다. 보안을 위해 기본값 이상의 값을 권장한다.</p>
<h2>사용법</h2>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-bash" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#ffc66d">yarn</span><span> </span><span class="token" style="color:#ffc66d">add</span><span> bcrypt @types/bcrypt </span><span class="token" style="color:#808080"># nestjs는 타입스크립트가 기본이기 때문에 타입으로 설치</span></code></pre></pre>
<p>따로 module이나 main에 등록할 필요 없이 사용하고자 하는 파일에 불러오면 된다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-typescript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#cc7832">import</span><span> </span><span class="token imports" style="color:#a9b7c6">*</span><span class="token imports"> </span><span class="token imports module" style="color:#cc7832">as</span><span class="token imports"> bcrypt</span><span> </span><span class="token module" style="color:#cc7832">from</span><span> </span><span class="token" style="color:#6a8759">&#x27;bcrypt&#x27;</span><span class="token" style="color:#a9b7c6">;</span><span>
</span>
<span></span><span class="token" style="color:#808080">// 암호화 후 저장</span><span>
</span><span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">someFN</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>userData</span><span class="token" style="color:#a9b7c6">:</span><span class="token maybe-class-name">UserData</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> hashPassword </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> bcrypt</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">hash</span><span class="token" style="color:#a9b7c6">(</span><span>userData</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">password</span><span class="token" style="color:#a9b7c6">,</span><span class="token" style="color:#6897bb">10</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> saveData </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    	email</span><span class="token" style="color:#a9b7c6">:</span><span>userData</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">email</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        password</span><span class="token" style="color:#a9b7c6">:</span><span> hashPassword</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span>    </span><span class="token" style="color:#808080">// 정보 저장 로직</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span>
<span></span><span class="token" style="color:#808080">// 저장된 데이터를 통해 비밀번호 확인</span><span>
</span><span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">checkFN</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span>userData</span><span class="token" style="color:#a9b7c6">:</span><span class="token maybe-class-name">UserData</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> hashedPassword </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#808080">// 저장된 정보 불러오는 로직</span><span>
</span>
<span>    </span><span class="token" style="color:#808080">// true or false</span><span>
</span><span>    </span><span class="token" style="color:#cc7832">const</span><span> match </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> bcrypt</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">compare</span><span class="token" style="color:#a9b7c6">(</span><span>userData</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">password</span><span class="token" style="color:#a9b7c6">,</span><span>hashedPassword</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">if</span><span class="token" style="color:#a9b7c6">(</span><span>match</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#808080">// 인증 후 로직</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></pre></pre>
<hr/>
<p>참조 : <a href="https://github.com/kelektiv/node.bcrypt.js#readme">https://github.com/kelektiv/node.bcrypt.js#readme</a></p></div></main><div class="sc-13767f41-0 bPoulP"><p><strong>&quot;nestjs&quot;</strong> <!-- -->카테고리의 다른 글</p><ul class="sc-13767f41-1 fGgBMo"></ul></div><div class="sc-e9ba6bf1-3 iviOZH"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-7eadfa91-0 cYGwoY"><nav class="sc-c7d31db6-0 iCXSKe"><ul class="sc-c7d31db6-1 dOoFcu"><p>Category</p><div><p class="sc-c7d31db6-2 buPWJy">FE</p><li class="sc-c7d31db6-3 cVRIqN"><a href="/html">HTML</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/css">CSS</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/javascript">JavaScript</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/typescript">TypeScript</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/redux">Redux</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/react">React</a></li><li class="sc-c7d31db6-3 cVRIqN"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-c7d31db6-2 buPWJy">BE</p><li class="sc-c7d31db6-3 cVRIqN"><a style="color:white;font-weight:bold" href="/nestjs">Nestjs</a></li></div><div><p class="sc-c7d31db6-2 buPWJy">CS</p><li class="sc-c7d31db6-3 cVRIqN"><a href="/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC%EA%B8%B0%EC%82%AC">정보처리기사</a></li></div><div><p class="sc-c7d31db6-2 buPWJy">ETC</p><li class="sc-c7d31db6-3 cVRIqN"><a href="/github">Simple Memo</a></li></div></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"nestjs use bcrypt","description":"Nestjs에서 bcrypt 사용하기","category":"nestjs","date":"2023-04-13","content":"\r\n## bycrypt란?\r\n\r\n비밀번호 등을 안전하게 암호화하여 저장하고 검증할 수 있도록 도와주는 라이브러리로, 랜덤한 salt를 생성하고 이를 비밀번호와 함께 암호화하여 저장한다. 이후 비밀번호 검증 시에도 같은 salt를 사용하여 입력받은 비밀번호를 암호화한 후, 저장된 암호화된 비밀번호와 비교하여 일치하는지 검증한다.\r\n\r\nbcrypt는 암호화 강도를 선택할 수 있는 기능을 제공한다. 기본값은 10으로, 숫자가 클수록 강도가 높아지며 암호화에 소요되는 시간도 늘어난다. 보안을 위해 기본값 이상의 값을 권장한다.\r\n\r\n## 사용법\r\n\r\n```bash\r\nyarn add bcrypt @types/bcrypt # nestjs는 타입스크립트가 기본이기 때문에 타입으로 설치\r\n```\r\n\r\n따로 module이나 main에 등록할 필요 없이 사용하고자 하는 파일에 불러오면 된다.\r\n\r\n```typescript\r\nimport * as bcrypt from 'bcrypt';\r\n\r\n// 암호화 후 저장\r\nconst someFN = async (userData:UserData) =\u003e {\r\n\tconst hashPassword = await bcrypt.hash(userData.password,10)\r\n\tconst saveData = {\r\n    \temail:userData.email,\r\n        password: hashPassword,\r\n    }\r\n    // 정보 저장 로직\r\n}\r\n\r\n// 저장된 데이터를 통해 비밀번호 확인\r\nconst checkFN = async (userData:UserData) =\u003e{\r\n\tconst hashedPassword = // 저장된 정보 불러오는 로직\r\n\r\n    // true or false\r\n    const match = await bcrypt.compare(userData.password,hashedPassword)\r\n    if(match) // 인증 후 로직\r\n}\r\n```\r\n\r\n---\r\n\r\n참조 : https://github.com/kelektiv/node.bcrypt.js#readme\r\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"nestjs-use-bcrypt"},"buildId":"tGE6jCvqtjQ0QiPDqI9WB","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>