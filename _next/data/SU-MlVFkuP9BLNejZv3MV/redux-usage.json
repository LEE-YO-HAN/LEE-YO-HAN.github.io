{"pageProps":{"title":"redux usage","description":"redux 사용해보기","category":"redux","keyword":"redux사용법","date":"2023-03-04","content":"\r\n# React에서 Redux 사용해보기\r\n\r\n리덕스 툴킷 x\r\n\r\n## Redux 설치\r\n\r\n```bash\r\nyarn add redux react-redux\r\n```\r\n\r\n1. src 디렉토리 안에 redux 폴더 생성\r\n2. redux 폴더 안에 config, modules 폴더 생성 (생성할 state들의 그룹)\r\n3. modules 폴더 안 store.js 생성\r\n   > 폴더/파일 명은 목적이나 폴더 구조에 맞춰 자유롭게 생성해줘도 괜찮다.\r\n\r\n## 스토어 생성\r\n\r\n```javascript\r\n// src/configStore.js\r\n\r\nimport { createStore, combineReducers } from \"redux\";\r\nimport todo from \"./modules/todo\"; // 모듈에 있는 reducer 불러오기\r\n\r\nconst rootReducer = combineReducers({});\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;\r\n```\r\n\r\n## 스토어 연동\r\n\r\n```javascript\r\n// 디렉토리 최상단 파일 ex/ index.js or app.js\r\n\r\nimport store from \"./redux/config/configStore\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\r\nroot.render(\r\n  //App을 Provider로 감싸주고, configStore에서 export default 한 store를 넣어준다.\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n);\r\nreportWebVitals();\r\n```\r\n\r\n## reducer 편집\r\n\r\n```javascript\r\n// 예제\r\n// todo.js - ./modules에 있는 파일\r\n\r\n// Actions\r\nconst CREATE = \"my-app/todo/CREATE\";\r\nconst REMOVE = \"my-app/todo/REMOVE\";\r\n\r\n// Reducer\r\n//action이 없으면 state는 아래 initialState의 초기값, 있으면 action 값\r\nexport default function reducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case CREATE: {\r\n      const new_todo_list = [...state.todos, action.todo];\r\n      return { todos: new_todo_list };\r\n    }\r\n    case REMOVE: {\r\n      const new_todo_list = action.todo;\r\n      return { todos: new_todo_list };\r\n    }\r\n\r\n    // ...etc\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// Action Creators\r\nexport function createTodo(todo) {\r\n  console.log(\"create 액션 생성\");\r\n  return { type: CREATE, todo };\r\n}\r\n\r\nconst initialState = {\r\n  // createTodo(todo)의 초기값 설정\r\n  todos: [\r\n    {\r\n      id: 1,\r\n      name: \"qwert\",\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"asdf\",\r\n    },\r\n  ],\r\n};\r\n\r\nexport function removeTodo(todo) {\r\n  console.log(\"remove 액션 생성\");\r\n  return { type: REMOVE, todo };\r\n}\r\n```\r\n\r\n## 컴포넌트에서의 사용\r\n\r\nreducer를 모두 작성해준 후 컴포넌트에서 사용할 수 있다.\r\n\r\n```javascript\r\n\r\n// 리덕스 훅\r\nimport {useSelector , useDispatch} from \"react-redux\";\r\n\r\n\r\nconst test = () =>{\r\n\t// 해당 상수는 useSelector를 통해 reducer에 있는 state 값을 가져온다.\r\n\tconst testList = useSelector((state=>state.todo.todos))\r\n    // 액션을 생성하기 위해 준비\r\n    const dispatch = useDispatch()\r\n\r\n    const addBtn = () =>{\r\n    \t// ---실행하고싶은 코드들---\r\n        // -------------------------\r\n        // dispatch로 액션을 생성했으니, 원하는 처리는 reducer에서 입력하면 된다.\r\n        dispatch(createTodo(reducer에서 처리하고 싶은 값))\r\n    }\r\n    return(\r\n    \t<div></div>\r\n    )\r\n}\r\n\r\n```\r\n\r\n참조 : https://ko.redux.js.org/\r\n"},"__N_SSG":true}