<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Hanbbi<!-- -->&#x27;<!-- -->s DevLog</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="Promise.all()은 언제 쓰고 왜 쓰나요? - 여러 비동기 요청 한 번에 처리하기"/><meta name="keywords" content="javascript, javascript how to use promise.all, javascript, Promise.all"/><meta http-equiv="title" content="Promise.all()은 언제 쓰고 왜 쓰나요? - 여러 비동기 요청 한 번에 처리하기"/><meta http-equiv="subject" content="javascript"/><meta property="og:title" content="javascript how to use promise.all"/><meta property="og:description" content="Promise.all()은 언제 쓰고 왜 쓰나요? - 여러 비동기 요청 한 번에 처리하기"/><meta property="og:image" content="/images/cards/JAVASCRIPT.png"/><meta name="naver-site-verification" content="af9c8049662a7c6c85ea946e9eb561086e70062c"/><meta name="google-site-verification" content="Zgp7rA3RAdcRnhPPsGLK-t4KVTO86AejlDIQQIGpvLg"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4077287316160146" crossorigin="anonymous"></script><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="14"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f9bc783e634631d2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f9bc783e634631d2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7d0bddee48749f95.js" defer=""></script><script src="/_next/static/chunks/framework-73b8966a3c579ab0.js" defer=""></script><script src="/_next/static/chunks/main-b0c8bcfd40968c52.js" defer=""></script><script src="/_next/static/chunks/pages/_app-75e0f90c6bcb24ce.js" defer=""></script><script src="/_next/static/chunks/235-2e07634c3cd78c71.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-d0432a4b187b0b46.js" defer=""></script><script src="/_next/static/K8nG0fk5J7F1j1N6vDjxZ/_buildManifest.js" defer=""></script><script src="/_next/static/K8nG0fk5J7F1j1N6vDjxZ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="sc-c845a976-0 icUnkm"><header class="sc-c62045a0-0 ejGrOn"><span style="display:none" class="sc-c62045a0-1 kkIswC"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 17 17" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g></g><path d="M16 3v2h-15v-2h15zM1 10h15v-2h-15v2zM1 15h15v-2h-15v2z"></path></svg></span><h1><a href="/">Hanbbi<!-- -->&#x27;<!-- -->s DevLog</a></h1><nav style="transform:translateX(-100%)" class="sc-e9bb2eba-0 extUal"><div class="sc-e9bb2eba-1 eDAIOV"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg></div><ul class="sc-e9bb2eba-2 kjvNul"><div><p class="sc-e9bb2eba-3 bvmfTl">FE</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/html">HTML</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/css">CSS</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a style="color:white;font-weight:bold" href="/javascript">JavaScript</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/typescript">TypeScript</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/redux">Redux</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/react">React</a></li><li class="sc-e9bb2eba-4 bSVRxo"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">BE</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/nestjs">Nestjs</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">CS</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-e9bb2eba-3 bvmfTl">ETC</p><li class="sc-e9bb2eba-4 bSVRxo"><a href="/github">Simple Memo</a></li></div></ul></nav></header><section class="sc-c845a976-1 bePtAz"><aside class="sc-226f6af7-0 jzKfYm"><div class="sc-226f6af7-1 eudLNA"><a target="_blank" href="https://portfolio-sigma-wheat-63.vercel.app/"><img alt="profile" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="/images/profileImage/cat.png"/><span>Go Profile!</span></a><p>Hanbbi</p></div><div class="sc-226f6af7-2 fEJwOM"><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0 0 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg><span>yhl0078@gmail.com</span></a><a target="_blank" href="https://github.com/LEE-YO-HAN"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>Github</span></a></div></aside><article class="sc-c845a976-2 jRRSKe"><main class="sc-39211eb-0 hLWqGG"><section class="sc-39211eb-1 cLKxEH"><p>javascript</p><h1>Promise.all()은 언제 쓰고 왜 쓰나요? - 여러 비동기 요청 한 번에 처리하기</h1><span>2023-05-19</span></section><main class="sc-39211eb-2 kPnWiO"><div class="markdown"><p>javascript를 통해 비동기 코드를 처리하는 기본적인 방법으로는 Callback 함수, Promise, async/await 등이 있다. 하지만 다수의 비동기 요청의 실행이 필요한 경우 Promise.all()을 사용해볼 수 있다.</p>
<h2><strong>Promise.all()이란?</strong></h2>
<p>여러 개의 Promise를 동시에 처리하고, 모든 Promise가 완료되었을 때 그 결과들을 반환하는 javascript의 메서드이다.</p>
<p>Promise.all()은 배열형태의 Promise들을 인자로 받고, 이 Promise들은 병렬적으로 실행된다. Promise.all()은 해당 Promise들의 결과를 배열로 반환한다.</p>
<p><strong>만약 하나라고 Promise가 거부되면, 첫 번째 거부된 Promise를 반환하고, 나머지 Promise들은 무시된다.</strong></p>
<h2><strong>Promise.all()을 사용하는 이유</strong></h2>
<p>Promise.all()을 사용하면 병렬적으로 실행되는 Promise들을 효율적으로 관리하고, 모든 Promise의 결과를 한 번에 처리할 수 있다. 이는 비동기 작업을 동시에 처리하고 작업이 완료되었을 때 결과를 수집해야 하는 상황에서 유용하다.</p>
<p>예를 들어 3초가 소요되는 비동기 요청 a, 2초가 소요되는 비동기 요청 b, 1초가 소요되는 비동기요청 c를 async/await을 통해 순차적으로 처리하게 되는 경우 총 6초가 소요되지만, Promise.all()을 통해 이전 요청이 완료되는 것을 기다리지 않고 비동기적으로 병렬로 실행시킨다면 3초만에 실행을 완료시킬 수 있는 것이다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:#808080">// acyns/await</span><span>
</span>
<span>cosnt </span><span class="token function-variable" style="color:#ffc66d">test1</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token" style="color:#ffc66d">a</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#808080">// 3000ms</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token" style="color:#ffc66d">b</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#808080">// 2000ms</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token" style="color:#ffc66d">c</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token" style="color:#808080">// 1000ms</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#808080">// 약 6초 소요</span><span>
</span>
<span></span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token function-variable" style="color:#ffc66d">test2</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span>res1</span><span class="token" style="color:#a9b7c6">,</span><span> res2</span><span class="token" style="color:#a9b7c6">,</span><span> res3</span><span class="token" style="color:#a9b7c6">]</span><span> </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token known-class-name class-name">Promise</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">all</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">[</span><span>
</span><span>    	</span><span class="token" style="color:#ffc66d">a</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        </span><span class="token" style="color:#ffc66d">b</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        </span><span class="token" style="color:#ffc66d">c</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">]</span><span class="token" style="color:#a9b7c6">)</span><span>
</span><span>    </span><span class="token control-flow" style="color:#cc7832">return</span><span> </span><span class="token" style="color:#a9b7c6">[</span><span>res1</span><span class="token" style="color:#a9b7c6">,</span><span> res2</span><span class="token" style="color:#a9b7c6">,</span><span> res3</span><span class="token" style="color:#a9b7c6">]</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#808080">// 약 3초 소요</span><span>
</span></code></pre></pre>
<h2><strong>Promise.all() 사용 상황</strong></h2>
<p>아래와 같이 특정 DB의 데이터를 연속적으로 도출하기 위해 async/await과 Promise.all()을 사용해봤다.</p>
<pre><pre node="[object Object]" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-javascript" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:#808080">// 1) async/await</span><span>
</span><span></span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#ffc66d">func1</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> community_with_likes </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> community</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>      </span><span class="token" style="color:#cc7832">const</span><span> like_list </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token" style="color:#cc7832">this</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">communityLikesRepository</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">find</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#9876aa">where</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9876aa">community_id</span><span class="token" style="color:#a9b7c6">:</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">community_id</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#cc7832">return</span><span> like_list</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span>
<span></span><span class="token" style="color:#808080">// 2) Promise.all()</span><span>
</span><span></span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#ffc66d">func2</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>	</span><span class="token" style="color:#cc7832">const</span><span> community_with_likes </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token known-class-name class-name">Promise</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">all</span><span class="token" style="color:#a9b7c6">(</span><span>
</span><span>      community</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">map</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#cc7832">async</span><span> </span><span class="token" style="color:#a9b7c6">(</span><span class="token parameter">item</span><span class="token" style="color:#a9b7c6">)</span><span> </span><span class="token arrow" style="color:#a9b7c6">=&gt;</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>        </span><span class="token" style="color:#cc7832">const</span><span> like_list </span><span class="token" style="color:#a9b7c6">=</span><span> </span><span class="token control-flow" style="color:#cc7832">await</span><span> </span><span class="token" style="color:#cc7832">this</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">communityLikesRepository</span><span class="token" style="color:#a9b7c6">.</span><span class="token method property-access" style="color:#ffc66d">find</span><span class="token" style="color:#a9b7c6">(</span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9876aa">where</span><span class="token" style="color:#a9b7c6">:</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>            </span><span class="token literal-property" style="color:#9876aa">community_id</span><span class="token" style="color:#a9b7c6">:</span><span> item</span><span class="token" style="color:#a9b7c6">.</span><span class="token property-access">community_id</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>          </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>        </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#cc7832">return</span><span> like_list</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>      </span><span class="token" style="color:#a9b7c6">}</span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">,</span><span>
</span><span>    </span><span class="token" style="color:#a9b7c6">)</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span><span>
</span></code></pre></pre>
<h3><strong>1. async/await</strong></h3>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FOMvFZ%2FbtsgB32dgj6%2FbaANEHQzX0hxTVckIjOPiK%2Fimg.png" alt="image"/></p>
<p>async/await을 사용해 결과를 출력하려고 할 때는 위와 같이 원하는 방식대로 데이터가 출력되지 않았다.</p>
<h3><strong>2. Promise.all()</strong></h3>
<p>하지만 Promise.all()을 사용해 결과를 도출하니 아래와 같이 원하는 결과값을 볼 수 있었다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fo73VZ%2FbtsgCGeohNN%2F42YW4sTfKAiXcl3VeJgP51%2Fimg.png" alt="image"/></p>
<p>비동기 처리를 다루는 방법은 여러가지가 있지만, 내가 적용하고자 하는 작업의 특성에 맞게 알맞는 방법을 골라서 사용하는 것이 좋겠다.</p>
<hr/>
<p>참조</p>
<p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all">https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all</a></p>
<p><a href="https://code-masterjung.tistory.com/91">https://code-masterjung.tistory.com/91</a></p></div></main><div class="sc-e5001ff0-0 hvYKNx"><p><strong>javascript</strong> 카테고리의 다른 글</p><ul class="sc-e5001ff0-1 fGkysO"></ul></div><div class="sc-39211eb-3 jqcgtI"><p>COMMENTS</p><section id="comment-box"></section></div></main></article><aside class="sc-7eadfa91-0 cYGwoY"><nav class="sc-ef3fe011-0 fOQwiv"><ul class="sc-ef3fe011-1 gcpOaT"><p>Category</p><div><p class="sc-ef3fe011-2 jLZscn">FE</p><li class="sc-ef3fe011-3 frUPYo"><a href="/html">HTML</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/css">CSS</a></li><li class="sc-ef3fe011-3 frUPYo"><a style="color:white;font-weight:bold" href="/javascript">JavaScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/typescript">TypeScript</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/redux">Redux</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/react">React</a></li><li class="sc-ef3fe011-3 frUPYo"><a href="/nextjs">Nextjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">BE</p><li class="sc-ef3fe011-3 frUPYo"><a href="/nestjs">Nestjs</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">CS</p><li class="sc-ef3fe011-3 frUPYo"><a href="/sw">정보처리기사</a></li></div><div><p class="sc-ef3fe011-2 jLZscn">ETC</p><li class="sc-ef3fe011-3 frUPYo"><a href="/github">Simple Memo</a></li></div></ul></nav></aside></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"javascript how to use promise.all","description":"Promise.all()은 언제 쓰고 왜 쓰나요? - 여러 비동기 요청 한 번에 처리하기","category":"javascript","keyword":"javascript, Promise.all","date":"2023-05-19","content":"\r\njavascript를 통해 비동기 코드를 처리하는 기본적인 방법으로는 Callback 함수, Promise, async/await 등이 있다. 하지만 다수의 비동기 요청의 실행이 필요한 경우 Promise.all()을 사용해볼 수 있다.\r\n\r\n## **Promise.all()이란?**\r\n\r\n여러 개의 Promise를 동시에 처리하고, 모든 Promise가 완료되었을 때 그 결과들을 반환하는 javascript의 메서드이다.\r\n\r\nPromise.all()은 배열형태의 Promise들을 인자로 받고, 이 Promise들은 병렬적으로 실행된다. Promise.all()은 해당 Promise들의 결과를 배열로 반환한다.\r\n\r\n**만약 하나라고 Promise가 거부되면, 첫 번째 거부된 Promise를 반환하고, 나머지 Promise들은 무시된다.**\r\n\r\n## **Promise.all()을 사용하는 이유**\r\n\r\nPromise.all()을 사용하면 병렬적으로 실행되는 Promise들을 효율적으로 관리하고, 모든 Promise의 결과를 한 번에 처리할 수 있다. 이는 비동기 작업을 동시에 처리하고 작업이 완료되었을 때 결과를 수집해야 하는 상황에서 유용하다.\r\n\r\n예를 들어 3초가 소요되는 비동기 요청 a, 2초가 소요되는 비동기 요청 b, 1초가 소요되는 비동기요청 c를 async/await을 통해 순차적으로 처리하게 되는 경우 총 6초가 소요되지만, Promise.all()을 통해 이전 요청이 완료되는 것을 기다리지 않고 비동기적으로 병렬로 실행시킨다면 3초만에 실행을 완료시킬 수 있는 것이다.\r\n\r\n```javascript\r\n\r\n// acyns/await\r\n\r\ncosnt test1 = async () =\u003e{\r\n\tawait a() // 3000ms\r\n    await b() // 2000ms\r\n    await c() // 1000ms\r\n}\r\n// 약 6초 소요\r\n\r\nconst test2 = async () =\u003e{\r\n\tconst [res1, res2, res3] = await Promise.all([\r\n    \ta(),\r\n        b(),\r\n        c()\r\n    ])\r\n    return [res1, res2, res3]\r\n}\r\n// 약 3초 소요\r\n\r\n```\r\n\r\n## **Promise.all() 사용 상황**\r\n\r\n아래와 같이 특정 DB의 데이터를 연속적으로 도출하기 위해 async/await과 Promise.all()을 사용해봤다.\r\n\r\n```javascript\r\n\r\n// 1) async/await\r\nasync func1(){\r\n\tconst community_with_likes = await community.map(async (item) =\u003e {\r\n      const like_list = await this.communityLikesRepository.find({\r\n        where: {\r\n          community_id: item.community_id,\r\n        },\r\n      });\r\n      return like_list;\r\n    });\r\n}\r\n\r\n// 2) Promise.all()\r\nasync func2(){\r\n\tconst community_with_likes = await Promise.all(\r\n      community.map(async (item) =\u003e {\r\n        const like_list = await this.communityLikesRepository.find({\r\n          where: {\r\n            community_id: item.community_id,\r\n          },\r\n        });\r\n        return like_list;\r\n      }),\r\n    );\r\n}\r\n\r\n```\r\n\r\n### **1. async/await**\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FOMvFZ%2FbtsgB32dgj6%2FbaANEHQzX0hxTVckIjOPiK%2Fimg.png)\r\n\r\nasync/await을 사용해 결과를 출력하려고 할 때는 위와 같이 원하는 방식대로 데이터가 출력되지 않았다.\r\n\r\n### **2. Promise.all()**\r\n\r\n하지만 Promise.all()을 사용해 결과를 도출하니 아래와 같이 원하는 결과값을 볼 수 있었다.\r\n\r\n![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2\u0026fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fo73VZ%2FbtsgCGeohNN%2F42YW4sTfKAiXcl3VeJgP51%2Fimg.png)\r\n\r\n비동기 처리를 다루는 방법은 여러가지가 있지만, 내가 적용하고자 하는 작업의 특성에 맞게 알맞는 방법을 골라서 사용하는 것이 좋겠다.\r\n\r\n---\r\n\r\n참조\r\n\r\nhttps://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\r\n\r\nhttps://code-masterjung.tistory.com/91\r\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"javascript-how-to-use-promise.all"},"buildId":"K8nG0fk5J7F1j1N6vDjxZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>